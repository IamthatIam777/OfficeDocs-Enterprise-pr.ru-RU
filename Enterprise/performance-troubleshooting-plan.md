---
title: План устранения проблем с производительностью Office 365
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 4/26/2017
ms.audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.collection: Ent_O365
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: e241e5d9-b1d8-4f1d-a5c8-4106b7325f8c
description: Необходимо знать действия, чтобы выполнить, чтобы определить и исправить задержка, зависания и снижения производительности между SharePoint Online, OneDrive для бизнеса, Exchange Online или Скайп для бизнеса в Интернет и клиентского компьютера? Перед вызовом поддержки в этой статье помогает устранять проблемы с производительностью Office 365 и даже исправить некоторые из наиболее общих проблем.
ms.openlocfilehash: c7eed9498920c601b3b345e8d1879ddbb16c56c3
ms.sourcegitcommit: 69d60723e611f3c973a6d6779722aa9da77f647f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2018
ms.locfileid: "22542467"
---
# <a name="performance-troubleshooting-plan-for-office-365"></a><span data-ttu-id="eae41-104">План устранения проблем с производительностью Office 365</span><span class="sxs-lookup"><span data-stu-id="eae41-104">Performance troubleshooting plan for Office 365</span></span>

<span data-ttu-id="eae41-p102">Необходимо знать действия, чтобы выполнить, чтобы определить и исправить задержка, зависания и снижения производительности между SharePoint Online, OneDrive для бизнеса, Exchange Online или Скайп для бизнеса в Интернет и клиентского компьютера? Перед вызовом поддержки в этой статье помогает устранять проблемы с производительностью Office 365 и даже исправить некоторые из наиболее общих проблем.</span><span class="sxs-lookup"><span data-stu-id="eae41-p102">Do you need to know the steps to take to identify and fix lags, hangs, and slow performance between SharePoint Online, OneDrive for Business, Exchange Online, or Skype for Business Online, and your client computer? Before you call support, this article can help you troubleshoot Office 365 performance issues and even fix some of the most common issues.</span></span>
  
<span data-ttu-id="eae41-p103">Эта статья является фактически пример план действий, которые можно использовать для захвата ценные данные о своей проблеме производительности как есть сведений о событиях. В этой статье, также включаются некоторые основные вопросы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p103">This article is actually a sample action plan that you can use to capture valuable data about your performance issue as it's happening. Some top issues are also included in this article.</span></span>
    
<span data-ttu-id="eae41-109">Если вы не знакомы с производительность сети сделать план долгосрочные мониторингу производительности между клиентскими компьютерами и Office 365, рассмотрим [производительности Office 365, настройке и устранении неполадок - Admin и для ИТ-специалистов](performance-tuning-using-baselines-and-history.md).</span><span class="sxs-lookup"><span data-stu-id="eae41-109">If you're new to network performance and want to make a long term plan to monitor performance between your client machines and Office 365, take a look at [Office 365 performance tuning and troubleshooting - Admin and IT Pro](performance-tuning-using-baselines-and-history.md).</span></span>
  
## <a name="sample-performance-troubleshooting-action-plan"></a><span data-ttu-id="eae41-110">Пример производительности устранения неполадок плана действий</span><span class="sxs-lookup"><span data-stu-id="eae41-110">Sample performance troubleshooting action plan</span></span>

<span data-ttu-id="eae41-p104">Этот план действий состоит из двух частей; этап подготовки и этап ведения журнала. Если у вас есть проблемы с производительностью на данный момент, и требуется для сбора данных, можно начать использовать этот план сразу.</span><span class="sxs-lookup"><span data-stu-id="eae41-p104">This action plan contains two parts; a preparation phase, and a logging phase. If you have a performance problem right now, and you need to do data collection, you can start using this plan right away.</span></span>
  
 <span data-ttu-id="eae41-113">**Подготовка на клиентском компьютере**</span><span class="sxs-lookup"><span data-stu-id="eae41-113">**Prepare the client computer**</span></span>
  
- <span data-ttu-id="eae41-p105">Поиск на клиентский компьютер, можно воспроизвести ошибку производительности. Этот компьютер будет использоваться в ходе устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="eae41-p105">Find a client computer that can reproduce the performance problem. This computer will be used during the course of troubleshooting.</span></span>
    
- <span data-ttu-id="eae41-116">Запишите действия, которые вызывают проблемы производительности происходить, вы будете готовы, когда для тестирования.</span><span class="sxs-lookup"><span data-stu-id="eae41-116">Write down the steps that cause the performance problem to happen so you're ready when it comes time to test.</span></span>
    
- <span data-ttu-id="eae41-117">Установка средств для сбора и записи информации:</span><span class="sxs-lookup"><span data-stu-id="eae41-117">Install tools for gathering and recording information:</span></span>
    
  - <span data-ttu-id="eae41-118">Установите [Netmon 3.4](https://www.microsoft.com/en-us/download/details.aspx?id=4865) (или с помощью средства трассировки эквивалентный сети).</span><span class="sxs-lookup"><span data-stu-id="eae41-118">Install [Netmon 3.4](https://www.microsoft.com/en-us/download/details.aspx?id=4865) (or use an equivalent network tracing tool).</span></span> 
    
  - <span data-ttu-id="eae41-119">Установить бесплатное базовый выпуск [HTTPWatch](https://www.httpwatch.com/download/) (или с помощью средства трассировки эквивалентный сети).</span><span class="sxs-lookup"><span data-stu-id="eae41-119">Install the free Basic Edition of [HTTPWatch](https://www.httpwatch.com/download/) (or use an equivalent network Tracing tool).</span></span> 
    
  - <span data-ttu-id="eae41-120">Использовать экран записи или записи действия (PSR.exe), которое поставляется с ОС Windows Vista и более поздних версий, чтобы вести запись действия, выполняемые при тестировании.</span><span class="sxs-lookup"><span data-stu-id="eae41-120">Use a screen recorder or run the Steps Recorder (PSR.exe) that comes with Windows Vista and later, in order to keep a record of the steps you take during testing.</span></span>
    
 <span data-ttu-id="eae41-121">**Журнал проблем с производительностью**</span><span class="sxs-lookup"><span data-stu-id="eae41-121">**Log the performance issue**</span></span>
  
- <span data-ttu-id="eae41-122">Закройте все внешние веб-браузеры.</span><span class="sxs-lookup"><span data-stu-id="eae41-122">Close all extraneous Internet browsers.</span></span>
    
- <span data-ttu-id="eae41-123">Запустите средство записи действия или другой записи экрана.</span><span class="sxs-lookup"><span data-stu-id="eae41-123">Start the Steps Recorder, or another screen recorder.</span></span>
    
- <span data-ttu-id="eae41-124">Запустите сетевой монитор захвата (или средство сетевой трассировки).</span><span class="sxs-lookup"><span data-stu-id="eae41-124">Start your Netmon capture (or network tracing tool).</span></span>
    
- <span data-ttu-id="eae41-125">Очистите кэш DNS на клиентском компьютере с помощью командной строки с помощью следующей команды ipconfig/flushdns.</span><span class="sxs-lookup"><span data-stu-id="eae41-125">Clear your DNS cache on the client computer from the command line by typing ipconfig /flushdns.</span></span>
    
- <span data-ttu-id="eae41-126">Запустите новый сеанс браузера и включить HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="eae41-126">Start a new browser session and turn on HTTPWatch.</span></span>
    
- <span data-ttu-id="eae41-127">Необязательно: При тестировании Exchange Online, запустите средство анализатор производительности клиента Exchange в консоли администрирования Office 365.</span><span class="sxs-lookup"><span data-stu-id="eae41-127">Optional: If you are testing Exchange Online, run the Exchange Client Performance Analyzer tool from the Office 365 admin console.</span></span>
    
- <span data-ttu-id="eae41-128">Воспроизведите точное действия, которые вызывают проблемы производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-128">Reproduce the exact steps that cause the performance issue.</span></span>
    
- <span data-ttu-id="eae41-129">Остановите вашей Netmon или другие средства трассировки.</span><span class="sxs-lookup"><span data-stu-id="eae41-129">Stop your Netmon or other tool's trace.</span></span>
    
- <span data-ttu-id="eae41-130">В командной строке выполните трассировку маршрута для подписки Office 365, введите следующую команду и затем нажмите клавишу ВВОД:</span><span class="sxs-lookup"><span data-stu-id="eae41-130">At the command line, run a trace route to your Office 365 subscription by typing the following command and then pressing ENTER:</span></span>
    
    `tracert \< *subscriptionname*  \>.onmicrosoft.com` 
    
- <span data-ttu-id="eae41-p106">Остановить запись действий и сохранить этот видеофайл. Убедитесь, что включают в себя дату и время записи и демонстрируется неправильное или хорошей производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-p106">Stop the Steps Recorder and save the video. Be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>
    
- <span data-ttu-id="eae41-p107">Сохраните файлы трассировки. Еще раз не забудьте включить дату и время записи и демонстрируется неправильное или хорошей производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-p107">Save the trace files. Again, be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>
    
<span data-ttu-id="eae41-p108">Если вы не знакомы с под управлением средства, описанные в этой статье, не обращайте, так как мы рассмотрим предоставить эти действия. Если вы знаете, выполнив такого типа записи сети, можно перейти к [руководство по сбору исходных значений](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), который описывает фильтрации и чтение журналов.</span><span class="sxs-lookup"><span data-stu-id="eae41-p108">If you're not familiar with running the tools mentioned in this article, don't worry because we provide those steps next. If you're accustomed to doing this kind of network capturing, you can skip to [How to collect baselines](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), which describes filtering and reading the logs.</span></span> 
  
## <a name="flush-the-dns-cache-first"></a><span data-ttu-id="eae41-137">Очистка кэша DNS сначала</span><span class="sxs-lookup"><span data-stu-id="eae41-137">Flush the DNS Cache first</span></span>

<span data-ttu-id="eae41-p109">Почему? Путем очистки кэша DNS в работе вы начинаете тестов с нуля. Путем очистки кэша, в случае сброс содержимого разрешения имен DNS для последних записей. Имейте в виду, что сброс не удаляет записи в файл HOSTs. При использовании записей файла узла широко следует скопировать эти операции в работе файла в другой каталог и затем очистите файл сервера.</span><span class="sxs-lookup"><span data-stu-id="eae41-p109">Why? By flushing out the DNS cache you're starting your tests with a clean slate. By clearing the cache, you're resetting the DNS resolver contents to the most up-to-date entries. Remember that a flush does not remove HOSTs file entries. If you use HOST file entries extensively, you should copy those entries out to a file in another directory and then empty the HOST file.</span></span>
  
 <span data-ttu-id="eae41-143">**Очистить кэш сопоставления имен DNS**</span><span class="sxs-lookup"><span data-stu-id="eae41-143">**Flush your DNS resolver cache**</span></span>
  
1. <span data-ttu-id="eae41-144">Откройте окно командной строки (либо **Начать** \> **запустите** \> **cmd** или **ключ Windows** \> **cmd**).</span><span class="sxs-lookup"><span data-stu-id="eae41-144">Open the command prompt, (either **Start** \> **Run** \> **cmd** or **Windows key** \> **cmd**).</span></span>
    
2. <span data-ttu-id="eae41-145">Введите следующую команду и нажмите клавишу ВВОД:`ipconfig /flushdns`</span><span class="sxs-lookup"><span data-stu-id="eae41-145">Type the following command and press ENTER: `ipconfig /flushdns`</span></span>
    
## <a name="netmon"></a><span data-ttu-id="eae41-146">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-146">Netmon</span></span>

<span data-ttu-id="eae41-p110">Средства наблюдения за сети корпорации Майкрософт ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) служит для анализа пакетов, — это трафиком, между компьютерами в сети. Используя сетевой монитор для трассировки трафика с помощью Office 365 вы можете захватить, представления и чтение заголовки пакетов, определение промежуточных устройств, проверьте важные параметры в сетевом оборудовании, выполните поиск потерянных пакетов и следуйте поток трафика между компьютерами в вашей организации сеть и Office 365. Так как основная часть трафика шифруются, то есть, его (путешествии через порт 443 через протокол SSL/TLS, не могут прочитать файлы, отправляемые. Вместо этого вы получаете неотфильтрованные трассировки пути, который принимает пакетов, которые помогут вам отслеживать поведение проблемы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p110">Microsoft's Network Monitoring tool ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analyzes packets, that is traffic, that passes between computers on networks. By using Netmon to trace traffic with Office 365 you can capture, view, and read packet headers, identify intervening devices, check important settings on network hardware, look for dropped packets, and follow the flow of traffic between computers on your corporate network and Office 365. Because the actual body of the traffic is encrypted, that is, it(travels on port 443 via SSL/TLS, you can't read the files being sent. Instead, you get an unfiltered trace of the path that the packet takes which can help you track down the problem behavior.</span></span>
  
<span data-ttu-id="eae41-p111">Убедитесь, что в настоящее время не применить фильтр. Вместо этого запустите выполняет действия и демонстрации проблемы перед остановкой трассировки и сохранение.</span><span class="sxs-lookup"><span data-stu-id="eae41-p111">Be sure you don't apply a filter at this time. Instead, run through the steps and demonstrate the problem before stopping the trace and saving.</span></span>
  
<span data-ttu-id="eae41-153">После установки Netmon 3.4, откройте средство и выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="eae41-153">After you install Netmon 3.4, open the tool and take these steps:</span></span>
  
 <span data-ttu-id="eae41-154">**Выполните Netmon трассировки и воспроизвести суть проблемы**</span><span class="sxs-lookup"><span data-stu-id="eae41-154">**Take a Netmon trace and reproduce the issue**</span></span>
  
1. <span data-ttu-id="eae41-155">Запустите Netmon 3.4.</span><span class="sxs-lookup"><span data-stu-id="eae41-155">Launch Netmon 3.4.</span></span>
    
    <span data-ttu-id="eae41-p112">Существует три области на **начальной** странице: **Последние захватывает**, **Выберите сетей**и **Приступая к работе с Microsoft сетевой монитор версии 3.4. Уведомление о**. Панели выберите сетей также предоставит список сетей по умолчанию, из которых вы можете захватить. Убедитесь, что здесь выбрать сетевые адаптеры.</span><span class="sxs-lookup"><span data-stu-id="eae41-p112">There are three panes on the **Start** page: **Recent Captures**, **Select Networks**, and the **Getting Started with Microsoft Network Monitor 3.4. Notice**. The Select Networks panel will also give you a list of the default networks from which you can capture. Be sure that network cards are selected here.</span></span>
    
2. <span data-ttu-id="eae41-p113">Нажмите кнопку **Новой записи** в верхней части **домашней** страницы. Это добавляет новую вкладку рядом с именем **Capture 1** **запустите** вкладку страница.</span><span class="sxs-lookup"><span data-stu-id="eae41-p113">Click **New Capture** at the top of the **Start** page. This adds a new tab beside the **Start** page tab called **Capture 1**.</span></span>
    
    ![Пользователь Nemon's взаимодействия с новой записи данных, Start и остановите кнопки с выделением.](media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)
  
3. <span data-ttu-id="eae41-162">Для использования простых записи, нажмите кнопку **Пуск** на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="eae41-162">To take a simple capture, click **Start** on the toolbar.</span></span> 
    
4. <span data-ttu-id="eae41-163">Воспроизведите действия, которые представляют проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="eae41-163">Reproduce the steps that present a performance issue.</span></span>
    
5. <span data-ttu-id="eae41-p114">Нажмите кнопку **Остановить** \> **файл** \> **Сохранить как**. Не забудьте предоставить дату и время часового пояса и упомянуть, если он демонстрирует неверные или хорошей производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-p114">Click **Stop** \> **File** \> **Save As**. Remember to give the date and time with the time zone and to mention if it demonstrates bad or good performance.</span></span>
    
## <a name="httpwatch"></a><span data-ttu-id="eae41-166">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="eae41-166">HTTPWatch</span></span>

<span data-ttu-id="eae41-p115">[HTTPWatch](https://www.httpwatch.com/download/) поставляется как затраты и бесплатные edition. Бесплатная базовой версии рассматривается все необходимые для этой проверки. Отслеживает HTTPWatch сетевой трафик и страница время загрузки непосредственно из окна браузера. HTTPWatch — это подключаемый модуль для Internet Explorer, графическое описание производительности. Анализ можно сохранения и открытия в HTTPWatch Studio.</span><span class="sxs-lookup"><span data-stu-id="eae41-p115">[HTTPWatch](https://www.httpwatch.com/download/) comes in charged, and a free edition. The free Basic Edition covers everything you need for this test. HTTPWatch monitors network traffic and page load time right from your browser window. HTTPWatch is a plug-in to Internet Explorer that graphically describes performance. The analysis can be saved and viewed in HTTPWatch Studio.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="eae41-p116">Если используется другой браузер, такой как Firefox, Google Chrome или не удается установить HTTPWatch в Internet Explorer, откройте новое окно браузера и нажмите клавишу F12 на клавиатуре. Вы должны увидеть всплывающее средства разработчика в нижней части браузера. Если вы используете Opera, нажмите сочетание клавиш CTRL + SHIFT + I для инспектора Web, перейдите на вкладку **сети** и выполните тестирование, используйте следующий. Сведения будут немного отличаться, но по-прежнему время загрузки будет отображаться в миллисекундах. > HTTPWatch очень удобно для устранения проблем с SharePoint Online время загрузки страницы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p116">If you use another browser, such as Firefox, Google Chrome, or if you can't install HTTPWatch in Internet Explorer, open a new browser window and press F12 on your keyboard. You should see the Developer Tool pop-up at the bottom of your browser. If you use Opera, press CTRL+SHIFT+I for Web Inspector, then click the **Network** tab and complete the testing outlined below. The information will be slightly different, but load times will still be displayed in milliseconds. > HTTPWatch is also very useful for issues with SharePoint Online page load times.</span></span> 
  
 <span data-ttu-id="eae41-177">**Запустите HTTPWatch и воспроизвести суть проблемы**</span><span class="sxs-lookup"><span data-stu-id="eae41-177">**Run HTTPWatch and reproduce the issue**</span></span>
  
1. <span data-ttu-id="eae41-p117">HTTPWatch является браузера подключаемого модуля, поэтому предоставление средство в браузере отличается для каждой версии Internet Explorer. Как правило HTTPWatch можно найти в разделе панели команд в браузере Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="eae41-p117">HTTPWatch is a browser plug-in, so exposing the tool in the browser is slightly different for each version of Internet Explorer. Typically, you can find HTTPWatch under the Commands bar in the Internet Explorer browser. </span></span></br></br><span data-ttu-id="eae41-p118">Если HTTPWatch подключаемый модуль не отображается в окне обозревателя, проверка версии браузера, нажмите кнопку Справка, \> о или более поздних версиях Internet Explorer, щелкните символ шестеренки и о Internet Explorer. Для запуска панели **команд** , щелкните правой кнопкой мыши в панели меню в Internet Explorer и нажмите кнопку **панели команд**. В прошлом HTTPWatch была связана с помощью команды и панели обозревателя после установки, если не сразу же отображается значок (даже после перезагрузки) установите флажок **средств**и панелей инструментов для значка. Помните, что панелей и параметры могут быть добавлены к ним.</span><span class="sxs-lookup"><span data-stu-id="eae41-p118">If you don't see the HTTPWatch plug-in in your browser window, check the version of your browser by click Help \> About, or, in later versions of Internet Explorer, click the gear symbol and About Internet Explorer. To launch the **Commands** bar, right-click the menu bar in Internet Explorer and click **Commands bar**. In the past, HTTPWatch has been associated with both the Commands and the Explorer bars, so once you install, if you don't immediately see the icon (even after reboot) check **Tools**, and your toolbars for the icon. Remember that toolbars can be customized and options can be added to them.</span></span></br>
    <span data-ttu-id="eae41-184">![Панель инструментов команда Internet Explorer отображается значок HTTPWatch.](media/198590b0-d7b1-4bff-a6ad-e4ec3a1e83df.png)</span><span class="sxs-lookup"><span data-stu-id="eae41-184">![Internet Explorer's Command toolbar with the HTTPWatch icon displayed.](media/198590b0-d7b1-4bff-a6ad-e4ec3a1e83df.png)</span></span>
  
2. <span data-ttu-id="eae41-p119">Запуск HTTPWatch в окне браузера Internet Explorer. Оно будет отображаться закрепленного браузера в нижней части окна. Нажмите кнопку **запись**.</span><span class="sxs-lookup"><span data-stu-id="eae41-p119">Launch HTTPWatch in an Internet Explorer browser window. It will appear docked to the browser at the bottom of that window. Click **Record**.</span></span>
    
3. <span data-ttu-id="eae41-p120">Воспроизведите точное этапы проблемы производительности. Нажмите кнопку **Остановить** в HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="eae41-p120">Reproduce the exact steps involved in the performance issue. Click the **Stop** button in HTTPWatch.</span></span> 
    
4. <span data-ttu-id="eae41-p121">**Сохраните** HTTPWatch или **отправки по электронной почте**. Помните, что имя файла, чтобы оно включало сведения о дате и времени и значение, указывающее, содержит ли часы демонстрационный хороший или недопустимый производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-p121">**Save** the HTTPWatch or **Send by Email**. Remember to name the file so that it includes date and time information and an indication of whether your Watch contains a demonstration of good or bad performance.</span></span></br></br><span data-ttu-id="eae41-192">![HTTPWatch с отображением вкладки "Сеть" при загрузке домашней страницы Office 365.](media/021a2c64-d581-49fd-adf4-4c364f589d75.PNG)</span><span class="sxs-lookup"><span data-stu-id="eae41-192">![HTTPWatch showing the Network tab for a page load of the Office 365 homepage.](media/021a2c64-d581-49fd-adf4-4c364f589d75.PNG)</span></span></br></br>
    <span data-ttu-id="eae41-p122">В этом снимке экрана — профессиональной версии HTTPWatch. Вы сможете открыть трассировку в базовой версией на компьютере с использованием профессионального версии и его чтение. Дополнительную информацию можно получить из трассировки через этот метод.</span><span class="sxs-lookup"><span data-stu-id="eae41-p122">This screen shot is from the Professional version of HTTPWatch. You can open traces taken in the Basic Version on a computer with a Professional version and read it there. Extra information may be available from the trace through that method.</span></span>
    
## <a name="problem-steps-recorder"></a><span data-ttu-id="eae41-196">Средство записи действий проблему</span><span class="sxs-lookup"><span data-stu-id="eae41-196">Problem Steps Recorder</span></span>

<span data-ttu-id="eae41-p123">Действия записи или PSR.exe, позволяет регистрировать проблемы, как они появляются. Это очень полезно средство и очень простым для запуска.</span><span class="sxs-lookup"><span data-stu-id="eae41-p123">Steps Recorder, or PSR.exe, allows you to record issues as they are occurring. It's a very useful tool and very simple to run.</span></span>
  
 <span data-ttu-id="eae41-199">**Запустите средство записи действий проблему (PSR.exe) для записи работы**</span><span class="sxs-lookup"><span data-stu-id="eae41-199">**Run Problem Steps Recorder (PSR.exe) to record your work**</span></span>
  
1. <span data-ttu-id="eae41-200">Либо используйте **запустите** \> **запустите** \> введите **PSR.exe** \> **кнопку ОК**, или нажмите **Клавиши Windows** \> введите **PSR.exe** \> и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="eae41-200">Either use **Start** \> **Run** \> type **PSR.exe** \> **OK**, or, click the **Windows Key** \> type **PSR.exe** \> and then press ENTER.</span></span> 
    
2. <span data-ttu-id="eae41-p124">В появившемся окне малого PSR.exe нажмите кнопку **Начать запись** и воспроизвести действия, которые воспроизвести суть проблемы производительности. При необходимости, нажав кнопку **Добавить комментарии**можно добавить комментарии.</span><span class="sxs-lookup"><span data-stu-id="eae41-p124">When the small PSR.exe window appears, click **Start Record** and reproduce the steps that reproduce the performance issue. You can add comments as needed, by clicking **Add Comments**.</span></span>
    
3. <span data-ttu-id="eae41-p125">После завершения действия нажмите кнопку **Остановить запись** . Если проблема производительности визуализации страниц, дождитесь страницы, чтобы визуализировать до остановить запись.</span><span class="sxs-lookup"><span data-stu-id="eae41-p125">Click **Stop Record** when you have completed the steps. If the performance issue is a page render, wait for the page to render before you stop the recording.</span></span> 
    
4. <span data-ttu-id="eae41-205">Нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="eae41-205">Click **Save**.</span></span>
    
![Снимок экрана действия записи или PSR.exe.](media/8542b0aa-a3ff-4718-8dc4-43f5521c6c34.PNG)
  
<span data-ttu-id="eae41-p126">Дата и время записи для вас. Связывает вашей PSR Netmon трассировки и HTTPWatch времени и приводятся рекомендации по устранению неполадок точности. Дата и время в записи PSR можно показать передачи примерно через минуту между режимами входа и просмотра URL-адресов и частичное render сайта администрирования, например.</span><span class="sxs-lookup"><span data-stu-id="eae41-p126">The date and time is recorded for you. This links your PSR to your Netmon trace and HTTPWatch in time, and helps with precision troubleshooting. The date and time in the PSR record can show that a minute passed between the login and browsing of the URL and the partial render of the admin site, for example.</span></span>
  
## <a name="read-your-traces"></a><span data-ttu-id="eae41-210">Чтение вашей трассировки</span><span class="sxs-lookup"><span data-stu-id="eae41-210">Read your traces</span></span>

<span data-ttu-id="eae41-p127">Обучение все сети и устранение неполадок производительности, что кто-то необходимо знать через статьи нельзя. Начало хорошую производительность начинает опыт и знания принципы работы сети и обычно выполняет. Однако можно округлить список самым важным вопросам и показано, как средства упрощают позволяет устранить наиболее распространенные проблемы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p127">It isn't possible to teach everything about network and performance troubleshooting that someone would need to know via an article. Getting good at performance takes experience, and knowledge of how your network works and usually performs. But it is possible to round up a list of top issues and show how tools can make it easier for you to eliminate the most common problems.</span></span>
  
<span data-ttu-id="eae41-p128">Если вы хотите трубку навыки трассировки сети для сайтов Office 365, нет нет лучше Учитель, чем регулярно Создание трассировок загрузки страницы и получение взаимодействия их чтения. Например при наличии возможности загрузить службу Office 365 и трассировки процесса. Фильтрация трассировки для трафика DNS или поиск FrameData для имени службу, которую можно просмотреть. Проверка трассировки, чтобы получить представление о действия, выполняемые при загрузке службы. Эта информация поможет Узнайте, какие normal загрузки страницы должна выглядеть следующим и в случае Устранение неполадок, особенно, применимую к производительности, сравнение снижение трассировок можно последний много.</span><span class="sxs-lookup"><span data-stu-id="eae41-p128">If you want to pick up skills reading network traces for your Office 365 sites, there is no better teacher than creating traces of page loads regularly and gaining experience reading them. For example, when you have a chance, load an Office 365 service and trace the process. Filter the trace for DNS traffic, or search the FrameData for the name of the service you browsed. Scan the trace to get an idea of the steps that occur when the service loads. This will help you learn what normal page load should look like, and in the case of troubleshooting, particularly around performance, comparing good to bad traces can teach you a lot.</span></span>
  
<span data-ttu-id="eae41-p129">Сетевой монитор использует Microsoft Intellisense в поле Фильтр отображения. IntelliSense или завершение intelligent кода является этот прием, где введите в течение периода, а в поле в раскрывающемся списке отображаются все доступные параметры. Если, например, беспокоит о масштабирование окна TCP, можно найти на способ фильтра (например, `.protocol.tcp.window < 100`), это означает, что.</span><span class="sxs-lookup"><span data-stu-id="eae41-p129">Netmon uses Microsoft Intellisense in the Display filter field. Intellisense, or intelligent code completion, is that trick where you type in a period and all available options are displayed in a drop-down selection box. If, for example, you are worried about TCP window scaling, you can find your way to a filter (such as  `.protocol.tcp.window < 100`) by this means.</span></span>
  
![Снимок экрана из Netmon котором показано, что в поле Фильтр отображения используется intellisense.](media/75a56c11-9a60-47ee-a100-aabdfb1ba10f.PNG)
  
<span data-ttu-id="eae41-p130">В их трассировок Netmon может быть большое количество трафика. Если вы опытный с их чтения, скорее всего, будет поводу Открытие трассировки в первый раз. Сначала необходимо — это отделения сигнала от фонового шума в трассировке. Тестирование с Office 365 и это трафика, который требуется просмотреть. Если используется для просмотра сведений трассировки, не может потребоваться этого списка.</span><span class="sxs-lookup"><span data-stu-id="eae41-p130">Netmon traces can have a lot of traffic in them. If you aren't experienced with reading them, it's likely you will be overwhelmed opening the trace the first time. The first thing to do is separate the signal from the background noise in the trace. You tested against Office 365, and that's the traffic you want to see. If you are used to navigating through traces, you may not need this list.</span></span>
  
<span data-ttu-id="eae41-p131">Трафик между клиентом и Office 365 проходит через TLS, который означает, что тело трафика зашифрованные и не читаться в общий сетевой монитор трассировки. Анализа производительности не требуется знать особенности информации в пакете. Однако, очень интересует заголовков пакетов и сведения, которые они содержат.</span><span class="sxs-lookup"><span data-stu-id="eae41-p131">Traffic between your client and Office 365 travels via TLS, which means that the body of the traffic will be encrypted and not readable in a generic Netmon trace. Your performance analysis doesn't need to know the specifics of the information in the packet. It is, however, very interested in packet headers and the information that they contain.</span></span>
  
 <span data-ttu-id="eae41-231">**Советы для получения хороший трассировки**</span><span class="sxs-lookup"><span data-stu-id="eae41-231">**Tips to get a good trace**</span></span>
  
- <span data-ttu-id="eae41-p132">Знаете значение IPv4 или IPv6-адрес клиентского компьютера. Вы можете получить на командной строки с помощью следующей команды **IPConfig** и затем нажмите клавишу ВВОД. Знание этот адрес можно сообщить с первого взгляда, состоит ли трафик в трассировке непосредственно из клиентского компьютера. Если известные прокси-сервера, ping ее и получить его IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="eae41-p132">Know the value of the IPv4 or IPv6 address of your client computer. You can get this from the command prompt by typing **IPConfig** and then pressing ENTER. Knowing this address will let you tell at a glance whether the traffic in the trace directly involves your client computer. If there is a known proxy, ping it and get its IP address as well.</span></span> 
    
- <span data-ttu-id="eae41-p133">Очистить кэш сопоставления имен DNS и, если это возможно, закройте все браузеры, за исключением того, в котором выполняется тестов. Если вы не может делать это, например, если поддержка использует некоторые средство на основе браузера для просмотра на клиентском компьютере рабочий стол, будьте готовым для фильтрации трассировки.</span><span class="sxs-lookup"><span data-stu-id="eae41-p133">Flush your DNS resolver cache and, if possible, close all browsers except the one in which you are running your tests. If you are not able to do this, for instance, if support is using some browser-based tool to see your client computer's desktop, be prepared to filter your trace.</span></span>
    
- <span data-ttu-id="eae41-p134">В «занят» трассировки найдите службу Office 365, который вы используете. Если вы редко или никогда не видели трафик перед, это полезно шаг в отделение проблемы производительности от других помехи в сети. Существует несколько способов это сделать. Непосредственно перед теста, можно использовать команду ping или PsPing URL-адрес определенной службы ( `ping outlook.office365.com` и/или `psping -4 microsoft-my.sharepoint.com:443`, примеры). Можно также легко найти, PsPing трассировки Netmon (по имени процесс). Будет выведен отправная точка для начала поиска.</span><span class="sxs-lookup"><span data-stu-id="eae41-p134">In a busy trace, locate the Office 365 service that you're using. If you've never or seldom seen your traffic before, this is a helpful step in separating the performance issue from other network noise. There are a few ways to do this. Directly before your test, you can use ping or, PsPing, to the URL of the specific service ( `ping outlook.office365.com` and/or  `psping -4 microsoft-my.sharepoint.com:443`, for examples) . You can also easily find that PsPing in a Netmon trace (by its process name). That will give you a place to start looking.</span></span>
    
    <span data-ttu-id="eae41-p135">Если используется только протокол Netmon трассировки во время возникновения проблемы, это нормально слишком. Чтобы расположить самостоятельно, используйте фильтр как `ContainsBin(FrameData, ASCII, "office")` или `ContainsBin(FrameData, ASCII, "outlook")`. Можно записать номер кадра из файла трассировки. Можно также прокрутки области сводки кадра до правого и найдите в столбце идентификатор беседы. Отсутствует номер, указан ли для идентификатора беседе конкретных, который можно записать и просмотрите по отдельности более поздней версии. Не забудьте удалить этот фильтр перед применением любые другие фильтрации.</span><span class="sxs-lookup"><span data-stu-id="eae41-p135">If you're only using Netmon tracing at the time of the problem, that's okay too. To orient yourself, use a filter like  `ContainsBin(FrameData, ASCII, "office")` or  `ContainsBin(FrameData, ASCII, "outlook")`. You can record your frame number from the trace file. You may also want to scroll the Frame Summary pane all the way to the right and look for the Conversation ID column. There is a number indicated there for the ID of this specific conversation that you can also record and look at in isolation later. Remember to remove this filter before applying any other filtering.</span></span>
    
> [!TIP]
> <span data-ttu-id="eae41-p136">Сетевой монитор имеет много полезной встроенных фильтров. Попробуйте кнопку «Загрузить фильтр» в верхней части **окна** щелкните фильтр.</span><span class="sxs-lookup"><span data-stu-id="eae41-p136">Netmon has a lot of helpful built-in filters. Try the "Load Filter" button at the top of the **Display** filter pane.</span></span> 
  
![Поиск на IP-адресов с помощью PSPing в командной строке на клиентском компьютере.](media/4c43ac67-e28e-4536-842d-7add7aa28847.PNG)
  
![Сетевой монитор трассировки из клиента, отражающая одной команде PSPing через TCP фильтр. Flags.Syn == 1.](media/0ae7ef7d-e003-4d01-a006-dc49bd1fcef2.PNG)
  
<span data-ttu-id="eae41-p137">Познакомьтесь с трафик и сведения для поиска нужной информации. Например Узнайте определить, какие пакетов в трассировке первый ссылку на службу Office 365, которую вы используете (например, «Outlook»).</span><span class="sxs-lookup"><span data-stu-id="eae41-p137">Get familiar with your traffic, and learn to locate the information you need. For example, learn to determine which packet in the trace has the first reference to the Office 365 service you're using (like "Outlook").</span></span>
    
<span data-ttu-id="eae41-256">Получают Office 365 Online Outlook в качестве примера, трафик начинается примерно следующим образом:</span><span class="sxs-lookup"><span data-stu-id="eae41-256">Taking Office 365 Outlook Online as an example, the traffic begins something like this:</span></span>
  
- <span data-ttu-id="eae41-p138">Стандартные DNS-запрос и ответ DNS для outlook.office365.com с соответствующими QueryIDs. Важно Обратите внимание, что смещение времени для этот параметр Включить вокруг, а также место в мире глобальной DNS Office 365 отправляет запрос для разрешения имен. В идеале, как можно, а не как наполовину по всему миру локально. (Это может следовать некоторые DNS трафика сети для входа.)</span><span class="sxs-lookup"><span data-stu-id="eae41-p138">DNS Standard Query and DNS Response for outlook.office365.com with matching QueryIDs. It's important to note the Time Offset for this turn-around, as well as where in the world the Office 365 Global DNS sends the request for name resolution. Ideally, as locally as possible, rather than half-way across the world. (This may be followed by some DNS traffic the online login.)</span></span>
    
- <span data-ttu-id="eae41-261">HTTP GET запрос, состояние которого сообщить о перемещении без возможности восстановления (301)</span><span class="sxs-lookup"><span data-stu-id="eae41-261">A HTTP GET Request whose status report Moved Permanently (301)</span></span>
    
- <span data-ttu-id="eae41-p139">Трафик RWS, включая подключение RWS запросов и ответов подключение. (Это удаленного подключения для вас Winsock).</span><span class="sxs-lookup"><span data-stu-id="eae41-p139">RWS Traffic including RWS Connect requests and Connect replies. (This is Remote Winsock making a connection for you.)</span></span>
    
- <span data-ttu-id="eae41-p140">Беседа TCP SYN и TCP SYN/Подтверждений. Множество параметров в беседе влиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="eae41-p140">A TCP SYN and TCP SYN/ACK conversation. A lot of the settings in this conversation impact your performance.</span></span>
    
- <span data-ttu-id="eae41-p141">Затем серии TLS:TLS трафика, являющийся которых подтверждение TLS и беседы сертификат TLS будут выполняться. (Помните, что данные шифруются с помощью SSL/TLS).</span><span class="sxs-lookup"><span data-stu-id="eae41-p141">Then a series of TLS:TLS traffic which is where the TLS handshake and TLS certificate conversations take place. (Remember the data is encrypted via SSL/TLS.)</span></span>
    
<span data-ttu-id="eae41-p142">Все части трафика следующие важные и подключенными, но небольшие части трассировки содержат сведения, особенно важно с точки зрения производительности Устранение неполадок, поэтому мы рассмотрим эти области. Кроме того поскольку мы использовали достаточно Устранение неполадок в корпорации Майкрософт первые 10 список распространенных проблем производительности Office 365, мы рассмотрим эти проблемы и как с помощью средств, у нас есть выявить их далее.</span><span class="sxs-lookup"><span data-stu-id="eae41-p142">All parts of the traffic are important and connected, but small portions of the trace contain information particularly important in terms of performance troubleshooting, so we'll focus on those areas. Also, since we've done enough Office 365 performance troubleshooting at Microsoft to compile a Top Ten list of common problems, we'll focus on those issues and how to use the tools we have to root them out next.</span></span>
  
<span data-ttu-id="eae41-p143">Если вы еще не установили их все готово, ниже матрицы делает использовать несколько средств. Где это возможно. Приводятся ссылки на точки установки. В списке перечислены общие сетевые средства трассировки [Netmon](https://www.microsoft.com/en-us/download/details.aspx?id=4865) и [Wireshark](https://www.wireshark.org/), но использовать любое средство трассировки, которые вы готовы с и в котором в случае привыкших для фильтрации сетевого трафика. При тестировании, не забудьте:</span><span class="sxs-lookup"><span data-stu-id="eae41-p143">If you haven't installed them all ready, the matrix below makes use of several tools. Where possible. Links are provided to the installation points. The list includes common network tracing tools like [Netmon](https://www.microsoft.com/en-us/download/details.aspx?id=4865) and [Wireshark](https://www.wireshark.org/), but use any tracing tool you are comfortable with, and in which you're accustomed to filtering network traffic. When you're testing, remember:</span></span>
  
-  <span data-ttu-id="eae41-p144">*Закройте обозревателей и тестирования с только один браузера* - это повлечет за собой уменьшение общего трафика записи. Это имеет для менее загруженную трассировки.</span><span class="sxs-lookup"><span data-stu-id="eae41-p144">*Close your browsers, and test with only one browser running*  - This will reduce the overall traffic you capture. It makes for a less busy trace.</span></span> 
    
-  <span data-ttu-id="eae41-277">*Очистить кэш сопоставления имен DNS на клиентском компьютере* — это позволит получить нуля перед запуском вступило в записи, для удаления трассировки.</span><span class="sxs-lookup"><span data-stu-id="eae41-277">*Flush your DNS resolver cache on the client computer*  - This will give you a clean slate when you start to take your capture, for a cleaner trace.</span></span> 
    
## <a name="some-top-issues"></a><span data-ttu-id="eae41-278">Некоторые основные вопросы</span><span class="sxs-lookup"><span data-stu-id="eae41-278">Some Top Issues</span></span>

<span data-ttu-id="eae41-279">Некоторые распространенные проблемы, которые могут возникнуть и как их поиск трассировку сети.</span><span class="sxs-lookup"><span data-stu-id="eae41-279">Some common issues you may face and how to find them in your Network trace.</span></span>

### <a name="tcp-windows-scaling"></a><span data-ttu-id="eae41-280">Масштабирование окна TCP</span><span class="sxs-lookup"><span data-stu-id="eae41-280">TCP Windows Scaling</span></span>

<span data-ttu-id="eae41-p145">Найти в SYN - прежних версий SYN/приема. или время существования оборудование может не воспользоваться преимуществами масштабирование окна TCP.  Без масштабирования параметры соответствующих прав windows TCP в миллисекундах заполнения буфера 16-разрядный по умолчанию в заголовках TCP.  Трафик не удается продолжить отправку, пока клиент получает подтверждения, что был получен исходных данных, к задержкам.</span><span class="sxs-lookup"><span data-stu-id="eae41-p145">Found in the SYN - SYN/ACK. Legacy or aging hardware may not take advantage of TCP windows scaling.  Without proper TCP windows scaling settings, the default 16-bit buffer in TCP headers fills in milliseconds.  Traffic cannot continue to send until the client receives an acknowledgment that the original data has been received, causing delays.</span></span>

#### <a name="tools"></a><span data-ttu-id="eae41-285">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-285">Tools:</span></span>

- <span data-ttu-id="eae41-286">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-286">Netmon</span></span>
- <span data-ttu-id="eae41-287">Wireshark</span><span class="sxs-lookup"><span data-stu-id="eae41-287">Wireshark</span></span> 

#### <a name="what-youre-looking-for"></a><span data-ttu-id="eae41-288">Что вы ищете:</span><span class="sxs-lookup"><span data-stu-id="eae41-288">What you're looking for:</span></span>

<span data-ttu-id="eae41-p146">Найдите SYN - SYN/подтверждение трафика трассировку сети.  В сетевой монитор, используйте фильтр как `tcp.flags.syn == 1`. Этот фильтр аналогична в Wireshark.</span><span class="sxs-lookup"><span data-stu-id="eae41-p146">Look for the SYN - SYN/ACK traffic in your network trace.  In Netmon, use a filter like  `tcp.flags.syn == 1`. This filter is the same in Wireshark.</span></span>  

![Фильтр в сетевой монитор или Wireshark Syn пакетов для обоих средств: TCP. Flags.Syn == 1.](media/4b9a12a1-c915-43c8-ac2f-a679d0435a29.PNG)         
<span data-ttu-id="eae41-293">Обратите внимание, что для каждого SYN номер порта (Исх_порт) источника, который сопоставляется в поле порт назначения (Кон_порт), связанных с ними подтверждения (SYN/Подтверждения).</span><span class="sxs-lookup"><span data-stu-id="eae41-293">Notice that for every SYN there is a source port (SrcPort) number that is matched in the destination port (DstPort) of the related Acknowledgment (SYN/ACK).</span></span> 

<span data-ttu-id="eae41-294">Чтобы просмотреть значение масштабирования окна, которую использует подключение к сети, разверните узел сначала SYN и связанных с ними SYN/приема.</span><span class="sxs-lookup"><span data-stu-id="eae41-294">To see the Windows Scaling value that is used by your network connection, expand first the SYN, and then the related SYN/ACK.</span></span>  

![Рисунок, связанный с, показано, как в соответствии с Исх_порт к Кон_порт в трассировки, чтобы получить интервал времени.](media/6a4ca573-0253-4fbd-93e8-92821ee1c351.png)  

### <a name="tcp-idle-time-settings"></a><span data-ttu-id="eae41-296">Параметры времени простоя TCP</span><span class="sxs-lookup"><span data-stu-id="eae41-296">TCP Idle Time Settings</span></span>

<span data-ttu-id="eae41-p147">С исторической точки зрения большинство сети периметра настраиваются временные подключений, что означает, что обычно завершаются бездействия подключения. Бездействующих сеансов TCP может завершаться прокси-серверы и брандмауэры с более чем 100 – 300 секунд. Это инспектором для Outlook Online, так как он создает и использует долгосрочные подключения проверку их простоя или нет.</span><span class="sxs-lookup"><span data-stu-id="eae41-p147">Historically, most perimeter networks are configured for transient connections, meaning idle connections are generally terminated. Idle TCP sessions can be terminated by proxies and firewalls at greater than 100 to 300 seconds. This is problematic for Outlook Online because it creates and uses long-term connections, whether they are idle or not.</span></span>  

<span data-ttu-id="eae41-p148">При подключения завершаются с прокси-сервера или брандмауэра устройств, клиент не обоснованных и при попытке использовать Outlook Online будет означать на клиентский компьютер будет пытаться, несколько раз, восстановить подключение перед внесением новый. Может появиться зависает в продукт, приглашения или снижение производительности при загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p148">When connections are terminated by proxy or firewall devices, the client is not informed, and an attempt to use Outlook Online will mean a client computer will try, repeatedly, to revive the connection before making a new one. You may see hangs in the product, prompts, or slow performance on page load.</span></span>

#### <a name="tools"></a><span data-ttu-id="eae41-302">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-302">Tools:</span></span>

- <span data-ttu-id="eae41-303">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-303">Netmon</span></span>
- <span data-ttu-id="eae41-304">Wireshark</span><span class="sxs-lookup"><span data-stu-id="eae41-304">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-305">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-305">What to look for:</span></span>

<span data-ttu-id="eae41-p149">В сетевой монитор посмотрите на поле Смещение времени для приема-передачи. Работа с форматом — это время между клиент отправляет запрос на сервер и ответа обратно. Проверьте между клиентом и выходной точке (например клиента —\> прокси-сервера), или клиента Office 365 (клиент —\> Office 365). Это можно увидеть в различных пакетов.</span><span class="sxs-lookup"><span data-stu-id="eae41-p149">In Netmon, look at the Time Offset field for a round-trip. A round-trip is the time between client sending a request to the server and receiving a response back. Check between the Client and the egress point (ex. Client --\> Proxy), or the Client to Office 365 (Client --\> Office 365). You can see this in many types of packets.</span></span> 

<span data-ttu-id="eae41-311">Например, могут выглядеть фильтр в Netmon `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, или в Wireshark, `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span><span class="sxs-lookup"><span data-stu-id="eae41-311">As an example, the filter in Netmon may look like  `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, or, in Wireshark,  `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span></span>  

> [!TIP]
> <span data-ttu-id="eae41-p150">Не знаете, если IP-адрес в трассировки, относятся к DNS-сервера? Попробуйте его из командной строки. Нажмите кнопку **Пуск** \> **запустите** \> введите **команду cmd**и нажмите клавишу **Windows** \> и введите **команду cmd**. В командной строке введите `nslookup <the IP address from the network trace>`. Чтобы проверить, используйте nslookup от IP-адрес вашего компьютера. > Чтобы отображается список диапазонов IP-адресов корпорации Майкрософт, обратитесь к разделу [Office 365 URL-адреса и диапазоны IP-адресов](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="eae41-p150">Don't know if the IP address in your trace belongs to your DNS server? Try looking it up at the command line. Click **Start** \> **Run** \> and type **cmd**, or press **Windows Key** \> and type **cmd**. At the prompt, type  `nslookup <the IP address from the network trace>`. To test, use nslookup against your own computer's IP address. > To see a list of Microsoft's IP ranges, see [Office 365 URLs and IP address ranges](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span></span> 

<span data-ttu-id="eae41-p151">При наличии проблем, предполагается, что много времени смещения отображаться в данном случае (Outlook в Интернете), особенно в TLS:TLS пакетов, которые отображают прохождения данные приложения (например, в сетевой монитор можно найти приложение для поддержки пакетов данных с помощью `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`). Вы должны увидеть легко последовательность действий по времени в сеанс. Появление задержки при обновлении вашей сети Outlook, может быть причиной высокой степенью сбрасывает отправки.</span><span class="sxs-lookup"><span data-stu-id="eae41-p151">If there is a problem, expect long Time Offsets to appear, in this case (Outlook Online), particularly in TLS:TLS packets that show the passage of Application Data (for example, in Netmon you can find application data packets via  `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`). You should see a smooth progression in the time across the session. If you see long delays when refreshing your Outlook Online, this could be caused by a high degree of resets being sent.</span></span> 

### <a name="latencyround-trip-time"></a><span data-ttu-id="eae41-321">Задержка/Round быть времени</span><span class="sxs-lookup"><span data-stu-id="eae41-321">Latency/Round Trip Time</span></span> 

<span data-ttu-id="eae41-322">Задержка — это измерение, которое может значительно изменяться в зависимости от много переменных, такие обновления устройств время существования, Добавление большого числа пользователей в сети и процент общей пропускной способности, на другие задачи для сетевого подключения.</span><span class="sxs-lookup"><span data-stu-id="eae41-322">Latency is a measure that can change a lot depending on many variables, such upgrading aging devices, adding a large number of users to a network, and the percentage of overall bandwidth consumed by other tasks on a network connection.</span></span> 

<span data-ttu-id="eae41-323">На этой странице [Планирование сети и настройка производительности для Office 365](network-planning-and-performance.md) доступны калькуляторы пропускной способности для Office 365.</span><span class="sxs-lookup"><span data-stu-id="eae41-323">There are bandwidth calculators for Office 365 available from this [Network planning and performance tuning for Office 365](network-planning-and-performance.md) page.</span></span>  

<span data-ttu-id="eae41-p152">Необходимо оценить скорость подключения или пропускной способности подключения к поставщику услуг Интернета? Повторите этот сайт (или сайтов как его): [Официальный сайт Speedtest](https://www.speedtest.net/)и [Pingtest](http://www.pingtest.net/).</span><span class="sxs-lookup"><span data-stu-id="eae41-p152">Need to measure the speed of your connection, or your ISP connection's bandwidth? Try this site (or sites like it): [Speedtest Official Site](https://www.speedtest.net/), and [Pingtest](http://www.pingtest.net/).</span></span>

#### <a name="tools"></a><span data-ttu-id="eae41-326">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-326">Tools:</span></span>

- <span data-ttu-id="eae41-327">Ping</span><span class="sxs-lookup"><span data-stu-id="eae41-327">Ping</span></span>
- <span data-ttu-id="eae41-328">PsPing</span><span class="sxs-lookup"><span data-stu-id="eae41-328">PsPing</span></span>
- <span data-ttu-id="eae41-329">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-329">Netmon</span></span>
- <span data-ttu-id="eae41-330">Wireshark</span><span class="sxs-lookup"><span data-stu-id="eae41-330">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-331">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-331">What to look for:</span></span>

<span data-ttu-id="eae41-p153">Отслеживать задержку при трассировке выиграют от записанные IP-адрес клиентского компьютера и IP-адрес сервера DNS в Office 365. Это для упрощения фильтрации трассировки. При подключении через прокси-сервер, необходимо будет IP-адрес клиентского компьютера, IP-адрес прокси-сервер/выходной и Office 365 DNS IP-адрес, чтобы облегчить работу.</span><span class="sxs-lookup"><span data-stu-id="eae41-p153">To track latency in a trace, you will benefit from having recorded the client computer IP address and the IP address of the DNS server in Office 365. This is for the purpose of easier trace filtering. If you connect through a proxy, you will need your client computer IP address, the proxy/egress IP address, and the Office 365 DNS IP address, to make the work easier.</span></span>  

<span data-ttu-id="eae41-p154">Запрос проверки связи, отправляемых outlook.office365.com сообщит вам, имя центра обработки данных, получения запроса, даже в том случае, если ping *может* не иметь возможность подключения для отправки товарных знаках последовательных пакеты ICMP. При использовании PsPing (бесплатное средство для загрузки) и для конкретных портов (443) и возможно использование IPv4 (-4) можно получить среднее приемов-trip времени для отправленных пакетов. Этот вариант возможен это для других URL-адресов в службах Office 365, как `psping -4 yourSite.sharepoint.com:443`. На самом деле можно указать количество команды ping для получения большего примера среднее, попробуйте что-то вроде: `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span><span class="sxs-lookup"><span data-stu-id="eae41-p154">A ping request sent to outlook.office365.com will tell you the name of the datacenter receiving the request, even if ping  *may*  not be able to connect to send the trademark consecutive ICMP packets. If you use PsPing (a free tool for download), and specific the port (443) and perhaps to use IPv4 (-4) you will get an average round-trip-time for packets sent. This will work this for other URLs in the Office 365 services, like  `psping -4 yourSite.sharepoint.com:443`. In fact, you can specify a number of pings to get a larger sample for your average, try something like:  `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span></span>  

> [!NOTE]
> <span data-ttu-id="eae41-p155">PsPing не отправляет пакеты ICMP. Его проверяет связь с помощью пакетов TCP через конкретных портов, поэтому можно использовать любой вариант вы знаете, должны быть открыты. В Office 365, который использует протокол SSL/TLS, попробуйте присоединить порта: 443 для вашей PsPing.</span><span class="sxs-lookup"><span data-stu-id="eae41-p155">PsPing doesn't send ICMP packets. It pings with TCP packets over a specific port, so you can use any one you know to be open. In Office 365, which uses SSL/TLS, try attaching port :443 to your PsPing.</span></span>

![Изображение, которое отображает ping, разрешение outlook.office365.com и PSPing с 443 кэшированием, но также отчетов время приема-Передачи среднее 6.5ms.](media/c64339f2-2c96-45b8-b168-c2a060430266.PNG)        

<span data-ttu-id="eae41-p156">Если при выполнении трассировки сети загружается медленных ненадлежащим образом страницы Office 365, следует фильтровать Netmon или Wireshark трассировки для `DNS`. Это один из искомые IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="eae41-p156">If you loaded the slow performing Office 365 page while doing a network trace, you should filter a Netmon or Wireshark trace for  `DNS`. This is one of the IPs we're looking for.</span></span>  

<span data-ttu-id="eae41-p157">Ниже приведены шаги для фильтрации вашей сетевой монитор для получения IP-адреса (и посмотрите на задержку DNS). В этом примере использует outlook.office365.com, но также может использовать URL-адрес клиента SharePoint Online (hithere.sharepoint.com для примера).</span><span class="sxs-lookup"><span data-stu-id="eae41-p157">Here are the steps to take to filter your Netmon to get the IP address (and take a look at DNS Latency). This example uses outlook.office365.com, but may also use the URL of a SharePoint Online tenant (hithere.sharepoint.com for example).</span></span>  

1. <span data-ttu-id="eae41-347">Проверьте связь URL-адрес `ping outlook.office365.com` и в результатах, запишите имя и IP-адрес сервера DNS, отправляется запрос проверки связи.</span><span class="sxs-lookup"><span data-stu-id="eae41-347">Ping the URL `ping outlook.office365.com` and, in the results, record the name and IP address of the DNS server the ping request was sent to.</span></span> 
2. <span data-ttu-id="eae41-348">Сетевой трассировки, открыв страницу, выполнив действие, которое предоставляет проблемы производительности или, если вы видите высокой задержки на ping, его трассировку сети.</span><span class="sxs-lookup"><span data-stu-id="eae41-348">Network trace opening the page, or doing the action that gives you the performance problem, or, if you see a high latency on the ping, itself, network trace it.</span></span> 
3. <span data-ttu-id="eae41-p158">Откройте трассировку в Netmon и фильтров для DNS (этот фильтр также работает в Wireshark, но зависит от случая `-- dns`). Поскольку вы знаете имя сервера DNS из вашего ping может также фильтровать дополнительные speedily в Netmon следующим образом: `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")` , которая выглядит следующим образом в Wireshark dns и рамка содержит «namnorthwest».</span><span class="sxs-lookup"><span data-stu-id="eae41-p158">Open the trace in Netmon and filter for DNS (this filter also works in Wireshark, but is sensitive to case `-- dns`). Since you know the name of the DNS server from your ping you may also filter more speedily in Netmon like this: `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")` , which looks like this in Wireshark dns and frame contains "namnorthwest".</span></span></br><span data-ttu-id="eae41-p159">Откройте пакет ответа и в окне сведений о кадре сетевой монитор, нажмите кнопку DNS разверните для получения дополнительных сведений. Сведения о DNS, вы найдете IP-адрес сервера DNS, который пытался запроса в Office 365 — вам понадобится этот IP-адрес для следующего шага (средство PsPing). Удалите фильтр, щелкните правой кнопкой мыши на ответа DNS таким образом Netmon Frame \> поиск бесед \> DNS, чтобы увидеть DNS-запрос и ответ-одновременно.</span><span class="sxs-lookup"><span data-stu-id="eae41-p159">Open the response packet and, in Frame Details window of Netmon, click DNS to expand for more information. In the DNS information you'll find the IP address of the DNS server the request went to in Office 365 -- you'll need this IP address for the next step (the PsPing tool). Remove the filter, right-click on the DNS Response in Netmon's Frame Summary \> Find Conversations \> DNS to see the DNS Query and Response side-by-side.</span></span> 
4. <span data-ttu-id="eae41-p160">В сетевой монитор Кроме столбца смещение времени между DNS запроса и ответа. Следующий шаг, чтобы установить и использование [PsPing](https://technet.microsoft.com/en-us/sysinternals/jj729731.aspx) средство поставляется как очень удобными, так как ICMP часто заблокирована брандмауэров и так как PsPing элегантно отслеживает задержка в миллисекундах. PsPing завершения подключения по протоколу TCP на адрес и порт (в нашей делами открытый порт 443).</span><span class="sxs-lookup"><span data-stu-id="eae41-p160">In Netmon, also note the Time Offset  column between the DNS Request and Response. In the next step, the easy-to-install and use [PsPing](https://technet.microsoft.com/en-us/sysinternals/jj729731.aspx) tool comes in very handy, both because ICMP is often blocked on Firewalls, and because PsPing elegantly tracks latency in milliseconds. PsPing completes a TCP connection to an address and port (in our case open port 443).</span></span> 
5. <span data-ttu-id="eae41-357">Установка PsPing.</span><span class="sxs-lookup"><span data-stu-id="eae41-357">Install PsPing.</span></span> 
6. <span data-ttu-id="eae41-p161">Откройте командную строку (запустить \> запустите \> введите команду cmd или раздел Windows \> введите команду cmd) и перейдите в каталог в каталог, где установлены PsPing для выполнения команды PsPing. В разделе Мои примеры можно увидеть, что внесенные в папку «Производительности» на корневом C. Это можно сделать это для быстрого доступа.</span><span class="sxs-lookup"><span data-stu-id="eae41-p161">Open a command prompt (Start \> Run \> type cmd, or Windows Key \> type cmd) and change directory to the directory where you installed PsPing to run the PsPing command. In my examples you can see I made a 'Perf' folder on the root of C. You can do the same for quick access.</span></span> 
7. <span data-ttu-id="eae41-360">Введите команду, чтобы вы выполняете вашей PsPing по IP-адресу Office 365 DNS-сервера из более ранних трассировки Netmon--не забудьте добавить номер порта.</span><span class="sxs-lookup"><span data-stu-id="eae41-360">Type the command so that you're making your PsPing against the IP address of the Office 365 DNS server from your earlier Netmon trace -- remember to add the port number.</span></span> </br><span data-ttu-id="eae41-p162">Другими словами `psping -n 20 132.245.24.82:445`. Это будет предоставить выборки 20 обращений и среднее время задержки при остановке PsPing.</span><span class="sxs-lookup"><span data-stu-id="eae41-p162">In other words, `psping -n 20 132.245.24.82:445`. This will give you a sampling of 20 pings and average the latency when PsPing stops.</span></span> 

<span data-ttu-id="eae41-p163">Если вы собираетесь Office 365 через прокси-сервер, действия немного отличаться. Первый PsPing бы к прокси-серверу для получения значение Средняя задержка в миллисекундах для прокси-сервер/выходной и обратно, и либо запустите PsPing на прокси-сервере или на компьютере с помощью прямого подключения к Интернету для получения отсутствует значение (по одному в Office 365 и обратно).</span><span class="sxs-lookup"><span data-stu-id="eae41-p163">If you're going to Office 365 through a proxy server, the steps are a little different. You would first PsPing to your proxy server to get an average latency value in milliseconds to proxy/egress and back, and then either run PsPing on the proxy, or on a computer with a direct Internet connection to get the missing value (the one to Office 365 and back).</span></span>  

<span data-ttu-id="eae41-p164">Если нужно запускать PsPing с прокси-сервер, вам придется два значения миллисекунды: клиентского компьютера для прокси-сервера или выходной точке и прокси-сервера в Office 365. И все! Запись значений, который в любом случае.</span><span class="sxs-lookup"><span data-stu-id="eae41-p164">If you choose to run PsPing from the proxy, you'll have two millisecond values: Client computer to proxy server or egress point, and proxy server to Office 365. And you're done! Well, recording values, anyway.</span></span>  

<span data-ttu-id="eae41-p165">При выполнении PsPing на другом компьютере клиента, который имеет прямое подключение к Интернету, то есть, без прокси-сервера, имеется два значения миллисекунды: клиентского компьютера для прокси-сервера или выходной точке и клиентского компьютера для Office 365. В этом случае вычесть значение клиентского компьютера сервера или выходной точке прокси-сервера из значения клиентском компьютере с Office 365 и будут иметь номера круговой путь с клиентского компьютера к точке сервера или выходной прокси-сервера и от прокси-сервера или выходной пункты различные CE 365.</span><span class="sxs-lookup"><span data-stu-id="eae41-p165">If you run PsPing on another client computer that has a direct connection to the Internet, that is, without a proxy, you will have two millisecond values: Client computer to proxy server or egress point, and client computer to Office 365. In this case, subtract the value of client computer to proxy server or egress point from the value of client computer to Office 365, and you will have the RTT numbers from your client computer to the proxy server or egress point, and from proxy server or egress point to Office 365.</span></span> 

<span data-ttu-id="eae41-370">Тем не менее если на клиентский компьютер можно найти в задействованной расположения, непосредственно подключенные или обходит прокси-сервер, может выбрать для просмотра, если проблему воспроизводит существует начинается с и тестирование использования, затем.</span><span class="sxs-lookup"><span data-stu-id="eae41-370">However, if you can find a client computer in the impacted location that is directly connected, or bypasses the proxy, you may choose to see if the issue reproduces there to begin with, and test using it, thereafter.</span></span> 

<span data-ttu-id="eae41-371">Задержка, как видно в трассировку Netmon эти дополнительные миллисекундах можно добавить, если достаточно их в любой данного сеанса.</span><span class="sxs-lookup"><span data-stu-id="eae41-371">Latency, as seen in a Netmon trace, those extra milliseconds can add up, if there are enough of them in any given session.</span></span>  

![Показана общая задержка в Netmon, при этом заданный по умолчанию столбец "Time Delta" (Смещение по времени) добавлен в раздел "Frame Summary" (Сводка по фреймам).](media/7ad17380-8527-4bc2-9b9b-6310cf19ba6b.PNG)

> [!NOTE]
> <span data-ttu-id="eae41-p166">IP-адрес может отличаться от показано здесь, например, ваше ping может возвращать примерно дополнительные 157.56.0.0/16 или аналогичную диапазон IP-адреса. Список диапазонов, используемые Office 365 ознакомьтесь с об [Office 365 URL-адреса и диапазоны IP-адресов](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="eae41-p166">Your IP address may be different than the IPs shown here, for example, your ping may return something more like 157.56.0.0/16 or a similar range. For a list of ranges used by Office 365, check out [Office 365 URLs and IP address ranges](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span></span> 

<span data-ttu-id="eae41-375">Не забудьте развернуть все узлы, (есть кнопка вверху базы данных для) Если вы хотите поиска, например, 132.245.</span><span class="sxs-lookup"><span data-stu-id="eae41-375">Remember to expand all the nodes (there's a button at the top for this) if you want to search for, for example, 132.245.</span></span>

### <a name="proxy-authentication"></a><span data-ttu-id="eae41-376">Проверка подлинности прокси-сервера</span><span class="sxs-lookup"><span data-stu-id="eae41-376">Proxy Authentication</span></span>

<span data-ttu-id="eae41-p167">Применяется только к вам если уж через прокси-сервер. В противном случае эти действия можно пропустить. Когда работают должным образом, проверка подлинности прокси-сервера должна быть выполнена в миллисекундах, постоянно. Не следует видеть временная неправильное производительности в процессе периоды пикового использования (например).</span><span class="sxs-lookup"><span data-stu-id="eae41-p167">This only applies to you if you're going through a proxy server. If not, you can skip these steps. When working properly, proxy authentication should take place in milliseconds, consistently. You shouldn't see intermittent bad performance during peak usage periods (for example).</span></span>  

<span data-ttu-id="eae41-p168">Если проверка подлинности прокси-сервера, каждый раз, создать новое подключение TCP в Office 365 для получения сведений, необходимо проходить через процесс проверки подлинности в фоновом режиме. Таким образом например, при переходе из календаря для почты в Outlook Online, вам будет выполнена проверка подлинности. И в SharePoint Online, если на странице отображается мультимедиа или данных из нескольких сайтов или расположения, можно будет выполнять проверку подлинности для каждого различных TCP подключения, необходимого для визуализации данных.</span><span class="sxs-lookup"><span data-stu-id="eae41-p168">If Proxy authentication is on, each time you make a new TCP connection to Office 365 to get information, you need to pass through an authentication process behind the scenes. So, for example, when switching from Calendar to Mail in Outlook Online, you will authenticate. And in SharePoint Online, if a page displays media or data from multiple sites or locations, you will authenticate for each different TCP connection that is needed in order to render the data.</span></span>  

<span data-ttu-id="eae41-p169">В оперативном режиме Outlook могут возникать время загрузки медленных каждый раз, когда переключиться между календаря и ваш почтовый ящик или загрузке медленных страницы в SharePoint Online. Тем не менее существуют другие проблемы, не перечисленных здесь.</span><span class="sxs-lookup"><span data-stu-id="eae41-p169">In Outlook Online, you may experience slow load times whenever you switch between Calendar and your mailbox, or slow page loads in SharePoint Online. However, there are other symptoms not listed here.</span></span> 

<span data-ttu-id="eae41-p170">Проверка подлинности прокси-сервера — параметр на выходной прокси-сервера. Если он вызывает проблемы с производительностью с помощью Office 365, необходимо обратитесь к сети группы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p170">Proxy authentication is a setting on your egress proxy server. If it is causing a performance issue with Office 365, you must consult your networking team.</span></span>  

#### <a name="tool"></a><span data-ttu-id="eae41-388">Средство:</span><span class="sxs-lookup"><span data-stu-id="eae41-388">Tool:</span></span> 

- <span data-ttu-id="eae41-389">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-389">Netmon</span></span>
- <span data-ttu-id="eae41-390">Wireshark</span><span class="sxs-lookup"><span data-stu-id="eae41-390">Wireshark</span></span> 

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-391">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-391">What to look for:</span></span>

<span data-ttu-id="eae41-p171">Прокси-сервер проверки подлинности происходит каждый раз, когда новый сеанс TCP должен появиться, часто, чтобы запросить файлы или сведения из сервера или для предоставления сведений. Например может появиться проверки подлинности прокси-сервера вокруг запросы HTTP GET или HTTP POST. Если вы хотите просмотреть кадров, где проверка подлинности запросов трассировку, добавление столбца «Сводка NTLMSSP» Netmon и фильтр для `.property.NTLMSSPSummary`. Чтобы увидеть, сколько времени занимает проверку подлинности, добавьте столбец интервал времени.</span><span class="sxs-lookup"><span data-stu-id="eae41-p171">Proxy authentication takes place whenever a new TCP session must be spun up, commonly to request files or info from the server, or to supply info. For example, you may see proxy authentication around HTTP GET or HTTP POST requests. If you want to see the frames where you are authenticating requests in your trace, add the 'NTLMSSP Summary' column to Netmon and filter for  `.property.NTLMSSPSummary`. To see how long the authentication is taking, add the Time Delta column.</span></span> 

<span data-ttu-id="eae41-396">Добавление столбца к сетевой монитор:</span><span class="sxs-lookup"><span data-stu-id="eae41-396">To add a column to Netmon:</span></span> 
1. <span data-ttu-id="eae41-397">Щелкните правой кнопкой мыши столбец, такие как описание.</span><span class="sxs-lookup"><span data-stu-id="eae41-397">Right-click on a column such as Description.</span></span> 
2. <span data-ttu-id="eae41-398">Нажмите кнопку Выбрать столбцы.</span><span class="sxs-lookup"><span data-stu-id="eae41-398">Click Choose Columns.</span></span> 
3. <span data-ttu-id="eae41-399">Найдите NTLMSSP Сводка и интервал времени в списке и нажмите кнопку Добавить.</span><span class="sxs-lookup"><span data-stu-id="eae41-399">Locate NTLMSSP Summary and Time Delta in the list and click Add.</span></span> 
4. <span data-ttu-id="eae41-400">Перемещение новых столбцов в месте перед установкой или за в столбце Описание таким образом их рядом друг с другом.</span><span class="sxs-lookup"><span data-stu-id="eae41-400">Move the new columns into place before or behind the Description column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="eae41-401">Нажмите кнопку "ОК".</span><span class="sxs-lookup"><span data-stu-id="eae41-401">Click OK.</span></span> 

<span data-ttu-id="eae41-p172">Даже в том случае, если вы не добавите столбца, будут работать Netmon фильтра. Однако диагностики будет гораздо проще, если вы видите, какой этап проверки подлинности вы находитесь в.</span><span class="sxs-lookup"><span data-stu-id="eae41-p172">Even if you don't add the column, the Netmon filter will work. But your troubleshooting will be much easier if you can see what stage of authentication you're in.</span></span> 

<span data-ttu-id="eae41-p173">Когда материалы для экземпляров проверки подлинности прокси-сервера, убедитесь, что для изучения всех кадров, где есть запрос NTLM или проверку подлинности сообщения присутствует. При необходимости, щелкните правой кнопкой мыши определенный фрагмент трафика и поиск бесед \> TCP. Необходимо учитывать значения времени изменений в этих бесед.</span><span class="sxs-lookup"><span data-stu-id="eae41-p173">When looking for instances of Proxy Authentication, be sure to study all frames where there is an NTLM Challenge, or an Authenticate Message is present. If necessary, right-click the specific piece of traffic and Find Conversations \> TCP. Be aware of the Time Delta values in these Conversations.</span></span> 

![Netmon трассировки отображение прокси-сервера проверки подлинности, отфильтрованные по беседе.](media/b640f176-0a52-4bbb-972e-60fb3d6aece2.PNG)        

<span data-ttu-id="eae41-p174">Как видно в Wireshark 4 секунд задержки возможности проверки подлинности прокси-сервера. **Интервал времени из предыдущей отображаемый кадр** столбец был выполнен через правой кнопкой мыши поле с таким же именем в дополнительных сведениях frame и выбрав добавить имени столбца.</span><span class="sxs-lookup"><span data-stu-id="eae41-p174">A four second delay in proxy authentication as seen in Wireshark. The **Time delta from previous displayed frame** column was made via right-clicking the field of the same name in the frame details and selecting Add as Column.  </span></span><br/> <span data-ttu-id="eae41-410">![В Wireshark в столбце «Интервал времени из предыдущего отображаемого кадра» можно сделать с помощью правой кнопкой мыши поле с таким же именем в дополнительных сведениях frame и выбрав добавить имени столбца.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span><span class="sxs-lookup"><span data-stu-id="eae41-410">![In Wireshark, the 'Time delta from previous displayed frame' column can be made via right-clicking the field of the same name in the frame details and selecting Add as Column.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span></span>        

### <a name="dns-performance"></a><span data-ttu-id="eae41-411">Производительность DNS</span><span class="sxs-lookup"><span data-stu-id="eae41-411">DNS Performance</span></span>

<span data-ttu-id="eae41-412">Метод работает наиболее наиболее быстро и при его происходит почти достиг страны клиента по мере возможности.</span><span class="sxs-lookup"><span data-stu-id="eae41-412">Name resolution works best and most quickly when it takes place as close to the client's country as possible.</span></span> 

<span data-ttu-id="eae41-p175">Если разрешение имен DNS выполняется за границей, его можно добавить секунд загрузки страницы. В идеальном случае разрешения имен, выполняемых на менее 100 мс. Если не, вы должны сделать дальнейшего изучения.</span><span class="sxs-lookup"><span data-stu-id="eae41-p175">If DNS name resolution is taking place overseas, it can add seconds to page loads. Ideally, name resolution happens in under 100ms. If not, you should do further investigation.</span></span> 

> [!TIP]
> <span data-ttu-id="eae41-p176">Не уверены, как возможность подключения клиента работает в Office 365? Рассмотрим клиентского подключения к справочника [здесь](https://technet.microsoft.com/en-us/library/dn741250.aspx).</span><span class="sxs-lookup"><span data-stu-id="eae41-p176">Not sure how Client Connectivity works in Office 365? Take a look at the Client Connectivity Reference document [here](https://technet.microsoft.com/en-us/library/dn741250.aspx).</span></span>           

#### <a name="tools"></a><span data-ttu-id="eae41-418">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-418">Tools:</span></span> 

- <span data-ttu-id="eae41-419">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-419">Netmon</span></span>
- <span data-ttu-id="eae41-420">Wireshark</span><span class="sxs-lookup"><span data-stu-id="eae41-420">Wireshark</span></span>
- <span data-ttu-id="eae41-421">PsPing</span><span class="sxs-lookup"><span data-stu-id="eae41-421">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-422">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-422">What to look for:</span></span>
<span data-ttu-id="eae41-p177">Анализ производительности DNS — это обычно другого задания для трассировки сети. Тем не менее PsPing также полезен при линиатуры в, либо из возможных причин.</span><span class="sxs-lookup"><span data-stu-id="eae41-p177">Analyzing DNS performance is typically another job for a network trace. However, PsPing is also helpful in ruling in, or out, a possible cause.</span></span> 

<span data-ttu-id="eae41-p178">Трафик DNS основано на TCP и UDP-ПОРТ запросов и ответов помечаются с Идентификатором, которые помогут в соответствии с определенным запроса с определенным ответа. Вы увидите DNS трафика, когда, например, SharePoint Online использует сетевое имя или URL-адрес веб-страницы. Как правило большая часть трафик, за исключением при передаче зон, выполняется по протоколу UDP.</span><span class="sxs-lookup"><span data-stu-id="eae41-p178">DNS traffic is based on TCP and UDP requests and responses are clearly marked with an ID that will help to match a specific request with its specific response. You'll see DNS traffic when, for example, SharePoint Online uses a network name or URL on a web page. As a rule of thumb, most of this traffic, excepting when transferring Zones, runs over UDP.</span></span> 

<span data-ttu-id="eae41-p179">В сетевой монитор и Wireshark самого базового фильтр, который позволяет просмотреть трафик DNS — это просто `dns`. Убедитесь, что при указании фильтра использовать нижний регистр. Не забудьте очистить кэш сопоставления имен DNS перед началом работы воспроизвести суть проблемы на клиентском компьютере. Например при наличии медленных SharePoint Online загрузки страницы для домашней страницы, вам следует закрыть все браузеры, открыть обозреватель, запустить трассировку, очистите кэш разрешения на DNS и перейдите на сайт SharePoint Online. После разрешается всей страницы, необходимо остановить и сохранить трассировку.</span><span class="sxs-lookup"><span data-stu-id="eae41-p179">In both Netmon and Wireshark, the most basic filter that will let you look at DNS traffic is simply  `dns`. Be sure to use lower case when specifying the filter. Remember to flush your DNS resolver cache before you begin to reproduce the issue on your client computer. For example, if you have a slow SharePoint Online page load for the Home page, you should close all browsers, open a new browser, start tracing, flush your DNS resolver cache, and browse to your SharePoint Online site. Once the entire page resolves, you should stop and save the trace.</span></span>

![Стандартный фильтр для DNS в Netmon — DNS.](media/1bebc118-ca13-45f3-803f-ab73e7af401d.png)

<span data-ttu-id="eae41-p180">Требуется для поиска во время, смещение здесь. И может быть полезно для добавления столбца **Интервал времени** Netmon, что можно сделать, выполнив следующие действия:</span><span class="sxs-lookup"><span data-stu-id="eae41-p180">You want to look at the time offset here. And it may be helpful to add the **Time Delta** column to Netmon which you can do by completing these steps:</span></span> 
1. <span data-ttu-id="eae41-436">Щелкните правой кнопкой мыши столбец, такие как описание.</span><span class="sxs-lookup"><span data-stu-id="eae41-436">Right-click on a column such as Description.</span></span> 
2. <span data-ttu-id="eae41-437">Нажмите кнопку Выбрать столбцы.</span><span class="sxs-lookup"><span data-stu-id="eae41-437">Click Choose Columns.</span></span> 
3. <span data-ttu-id="eae41-438">Найдите интервал времени в списке и нажмите кнопку Добавить.</span><span class="sxs-lookup"><span data-stu-id="eae41-438">Locate Time Delta in the list and click Add.</span></span> 
4. <span data-ttu-id="eae41-439">Переместите нового столбца в месте перед установкой или за в столбце Описание таким образом их рядом друг с другом.</span><span class="sxs-lookup"><span data-stu-id="eae41-439">Move the new column into place before or behind the Description column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="eae41-440">Нажмите кнопку "ОК".</span><span class="sxs-lookup"><span data-stu-id="eae41-440">Click OK.</span></span> 

<span data-ttu-id="eae41-p181">Если запрос интересов, необходимо учитывать изоляция щелкнуть правой кнопкой мыши запрос в области сведений frame, выбрав **Поиск бесед** \> **DNS**. Обратите внимание, что панель бесед сети перескакивает право на конкретных беседы в журнале трафика UDP-ПОРТ.</span><span class="sxs-lookup"><span data-stu-id="eae41-p181">If you find a query of interest, consider isolating it by right-clicking that query in the frame details panel, choosing **Find Conversations** \> **DNS**. Notice that the Network Conversations panel jumps right to the specific conversation in its log of UDP traffic.</span></span> 

![Сетевой монитор трассировки из Outlook Online нагрузки фильтруется по DNS и с помощью поиск бесед и DNS, чтобы сузить результаты.](media/763cf20e-7b48-4a37-9449-c9978cfe118b.PNG)        

<span data-ttu-id="eae41-p182">В Wireshark можно сделать столбец для времени DNS. Трассировки (или откроет трассировки) в Wireshark и фильтрация с `dns`, или более выбирать `dns.time`. Щелкните на DNS-запрос и отображение сведений о панели разверните `Domain Name System (response)` подробные сведения. Вы увидите поле для времени (например, ` [Time: 0.001111100 seconds] `. Щелкните правой кнопкой мыши этот раз и выберите **Применить как столбец**. Это позволит получить столбец **времени** для быстрой сортировки трассировки. Щелкните новый столбец для сортировки по убыванию, чтобы увидеть, который называется DNS заняло самым длинным для решения.</span><span class="sxs-lookup"><span data-stu-id="eae41-p182">In Wireshark you can make a column for DNS time. Take your trace (or open a trace) in Wireshark and filter by  `dns`, or, more helpfully,  `dns.time`. Click on any DNS query, and, in the panel showing details, expand the  `Domain Name System (response)` details. You'll see a field for time (for example,  ` [Time: 0.001111100 seconds] `. Right-click this time and select **Apply as Column**. This will give you a **Time** column for quicker sorting of your trace. Click on the new column to sort by descending values to see which DNS call took the longest to resolve.</span></span> 

[<span data-ttu-id="eae41-451">Данные по SharePoint Online, отфильтрованные в Wireshark с помощью dns.time (нижний регистр), при этом значения времени из области сведений собраны в столбец и отсортированы по возрастанию.</span><span class="sxs-lookup"><span data-stu-id="eae41-451">A browse of SharePoint Online filtered in Wireshark by (lowercase) dns.time, with the time from the details made into a column and sorted ascending.</span></span>](media/1439dcc2-12ff-4ee2-9ef3-1484cf79c384.PNG)

<span data-ttu-id="eae41-p183">Если вы хотите сделать дальнейшего изучения время разрешения DNS, попробуйте PsPing от DNS порт, используемый TCP (например, `psping <IP address of DNS server>:53`). По-прежнему отображаются проблемы с производительностью? В противном случае проблемы наиболее подходящие более широкой сети выдачи чем проблема частные DNS приложение, которое попадание для этого разрешения. Это также отметить, помните, что ping для outlook.office365.com сообщит вам, где разрешения имен DNS для Outlook Online с удалением (например, outlook-namnorthwest.office365.com).</span><span class="sxs-lookup"><span data-stu-id="eae41-p183">If you would like to do more investigation of the DNS resolution time, try a PsPing against the DNS port used by TCP (for example,  `psping <IP address of DNS server>:53`) . Do you still see a performance issue? If you do, then the problem is more likely to be a broader network issue than an issue of specific the DNS application you're hitting to do resolution. It's also worth mentioning, again, that a ping to outlook.office365.com will tell you where DNS name resolution for Outlook Online is taking place (for example, outlook-namnorthwest.office365.com).  </span></span><br/> <span data-ttu-id="eae41-456">Если проблема выглядит для конкретных DNS, может потребоваться обратитесь в отдел ИТ для просмотра конфигурации DNS и DNS-пересылки для дальнейшего изучения этой проблемы.</span><span class="sxs-lookup"><span data-stu-id="eae41-456">If the issue looks to be DNS specific, it may be necessary to contact your IT department to look at DNS configurations and DNS Forwarders to further investigate this issue.</span></span> 

### <a name="proxy-scalability"></a><span data-ttu-id="eae41-457">Масштабируемость прокси-сервера</span><span class="sxs-lookup"><span data-stu-id="eae41-457">Proxy Scalability</span></span>

<span data-ttu-id="eae41-p184">Службы, такие как Outlook Online в Office 365 предоставить клиентам нескольких подключений к долгосрочного. Таким образом каждый пользователь может использовать несколько подключений, которые требуют больше времени жизни.</span><span class="sxs-lookup"><span data-stu-id="eae41-p184">Services like Outlook Online in Office 365 grant clients multiple long-term connections. Therefore, each user may use more connections that require a longer life.</span></span>  

> [!TIP]
> <span data-ttu-id="eae41-p185">Нужно запланировать использование пропускной способности, так как вы хотите добавить часто пользователей в Office 365? Попробуйте выполнить [Планирование использования пропускной способности Интернет для Office 365](https://technet.microsoft.com/en-us/library/hh852542.aspx). Существует калькуляторы пропускной способности существует.</span><span class="sxs-lookup"><span data-stu-id="eae41-p185">Need to plan for bandwidth use because you're about to add a lot users to Office 365? Try [Plan for Internet bandwidth usage for Office 365](https://technet.microsoft.com/en-us/library/hh852542.aspx). There are bandwidth calculators available there.</span></span>

#### <a name="tool"></a><span data-ttu-id="eae41-463">Средство:</span><span class="sxs-lookup"><span data-stu-id="eae41-463">Tool:</span></span>
 
<span data-ttu-id="eae41-464">Математические</span><span class="sxs-lookup"><span data-stu-id="eae41-464">Math</span></span>  

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-465">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-465">What to look for:</span></span> 

<span data-ttu-id="eae41-p186">Нет данных трассировки сетевого или средства устранения неполадок, определенным образом. Вместо этого он основан на параметрах расчетов пропускной способности учетом ограничений и других переменных.</span><span class="sxs-lookup"><span data-stu-id="eae41-p186">There is no network trace or troubleshooting tool specific to this. Instead, it's based upon bandwidth calculations given limitations and other variables.</span></span>  

### <a name="tcp-max-segment-size"></a><span data-ttu-id="eae41-468">Максимальный размер TCP</span><span class="sxs-lookup"><span data-stu-id="eae41-468">TCP Max Segment Size</span></span>

<span data-ttu-id="eae41-p187">Найти в SYN - SYN/приема.  Выполните действия этой проверки любого трассировки сетевого производительности, сделанных убедитесь, что пакеты TCP настроены для выполнения максимальный объем данных.</span><span class="sxs-lookup"><span data-stu-id="eae41-p187">Found in the SYN - SYN/ACK.  Do this check in any performance network trace you've taken to ensure that TCP packets are configured to carry the maximum amount of data possible.</span></span> 

<span data-ttu-id="eae41-p188">Цель — для просмотра MSS 1460 байт для передачи данных. Если вы находитесь за прокси-сервер или использовании NAT, не забудьте запустить этот тест от клиента к прокси-сервер/выходной/NAT и от прокси-сервер/выходной/NAT в Office 365 для достижения лучших результатов! Далее представлены различные сеансов TCP.</span><span class="sxs-lookup"><span data-stu-id="eae41-p188">The goal is to see a MSS of 1460 bytes for transmission of data. If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results! These are different TCP sessions.</span></span>

#### <a name="tool"></a><span data-ttu-id="eae41-474">Средство:</span><span class="sxs-lookup"><span data-stu-id="eae41-474">Tool:</span></span> 

<span data-ttu-id="eae41-475">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-475">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-476">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-476">What to look for:</span></span>

<span data-ttu-id="eae41-p189">Размер сегмента TCP Max (MSS) — это еще один параметр трехэтапного трассировку сети, который означает, что вы найдете необходимых данных в SYN - пакета SYN/Подтверждения. MSS довольно прост для просмотра.</span><span class="sxs-lookup"><span data-stu-id="eae41-p189">TCP Max Segment Size (MSS) is another parameter of the three-way handshake in your network trace, that means you'll find the data you need in the SYN - SYN/ACK packet. MSS is actually pretty simple to see.</span></span> 

<span data-ttu-id="eae41-479">Откройте любое производительности данных трассировки сетевого имеют и найдите подключение, которое вы хотите узнать, или, которое показывает, проблемам производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-479">Open any performance network trace you have and find the connection you're curious about, or that demonstrates the performance problem.</span></span> 

> [!NOTE]
> <span data-ttu-id="eae41-p190">Если посмотрев трассировки и требуется найти трафика, предназначенных для беседы, фильтрация по IP-адрес клиента, или IP-адрес прокси-сервера или выходной точке. Более подробное напрямую, необходимо будет ping тестируемое для IP-адреса Office 365 в трассировки и фильтрация по его URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="eae41-p190">If you are looking at a trace and need to find the traffic relevant to your conversation, filter by the IP of the Client, or the IP of the proxy server or egress point, or both. Going directly, you will need to ping the URL that you're testing for the IP address of Office 365 in the trace, and filter by it.</span></span> 

<span data-ttu-id="eae41-p191">Ниже описаны употреблении трассировки? Попробуйте использовать фильтры для сориентироваться самостоятельно. В сетевой монитор, выполните поиск по URL-адрес, например, `Containsbin(framedata, ascii, "sphybridExample")`, запомните номер кадра.</span><span class="sxs-lookup"><span data-stu-id="eae41-p191">Looking at the trace second-hand? Try using filters to orient yourself. In Netmon, run a search based on the URL, such as  `Containsbin(framedata, ascii, "sphybridExample")`, take note of the frame number.</span></span> 

<span data-ttu-id="eae41-p192">В Wireshark использовать примерно `frame contains "sphybridExample"`. Если вы Обратите внимание на то, что вы нашли трафика удаленного Winsock (RW) (она может выглядеть как параметр [PSH, Подтверждений] в Wireshark), не забывайте, что RWS подключается можно увидеть вскоре перед соответствующих SYN - SYN/подтверждения, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="eae41-p192">In Wireshark use something like  `frame contains "sphybridExample"`. If you notice that you've found Remote Winsock (RWS) traffic (it may appear as a [PSH, ACK] in Wireshark), remember that RWS connects can be seen shortly before relevant SYN - SYN/ACKs, as discussed earlier.</span></span> 

<span data-ttu-id="eae41-487">На этом этапе запишите номер frame, удалить фильтр, нажмите кнопку весь трафик в окне беседы сети в Netmon рассмотрение ближайшего SYN.</span><span class="sxs-lookup"><span data-stu-id="eae41-487">At this point, you can record the frame number, drop the filter, click All Traffic in the Network Conversations window in Netmon to look at the nearest SYN.</span></span> 

<span data-ttu-id="eae41-488">Важно, если не принимать какие-либо данные IP-адресации во время трассировки, поиск URL-адрес в трассировке (в рамках `sphybridExample-my.sharepoint.com`, например), предоставить IP-адресов для фильтра.</span><span class="sxs-lookup"><span data-stu-id="eae41-488">Importantly, if you didn't receive any of the IP address information at the time of the trace, finding your URL in the trace (part of `sphybridExample-my.sharepoint.com`, for example), will give you IP addresses to filter by.</span></span> 

<span data-ttu-id="eae41-p193">Найдите подключение, в том, что вы хотите увидеть трассировке. Это можно сделать, либо сканирования трассировки, путем фильтрации по IP-адреса или путем выбора определенных идентификаторы беседы с помощью окна беседы сети в сетевой монитор. После открытия пакета SYN, разверните узел TCP (в Netmon) или Transmission Control Protocol (в Wireshark) в панели сведений о кадре. Разверните параметры TCP и MaxSegementSize. Найдите связанные SYN подтверждение frame и разверните параметры TCP и MaxSegmentSize. Меньше двух значений будет вашей максимальный размер сегмента. На этом рисунке я использовать встроенные столбца в Netmon вызов TCP устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="eae41-p193">Locate the connection in the trace that you're interested in seeing. You may do this by either scanning the trace, by filtering by IP addresses, or by selecting specific Conversation IDs using the Network Conversations window in Netmon. Once you've found the SYN packet, expand TCP (in Netmon), or Transmission Control Protocol (in Wireshark) in the Frame Details panel. Expand TCP Options and MaxSegementSize. Locate the related SYN-ACK frame and Expand TCP Options and MaxSegmentSize. The smaller of the two values will be your Maximum Segment Size. In this picture, I make use of the built-in Column in Netmon called TCP Troubleshoot.</span></span>  

![Фильтрация в Netmon с помощью встроенных столбцов трассировку сети.](media/e073df13-71f8-497a-83b4-bb9f70bd9833.PNG)

<span data-ttu-id="eae41-p194">Встроенные столбца — в верхней части панели **Сведений о кадре** . (Чтобы переключиться обратно в обычный режим, нажмите кнопку столбцы еще раз и выберите часовой пояс.)</span><span class="sxs-lookup"><span data-stu-id="eae41-p194">The built-in column is at the top of the **Frame Details** panel. (To switch back to your normal view, click Columns again, and then choose Time Zone.)</span></span> 

<span data-ttu-id="eae41-499">![Где найти раскрывающийся список "Columns" (Столбцы) в верхней части сводных данных о фрейме, чтобы выбрать пункт "TCP Troubleshoot" (Устранение неполадок TCP).](media/64fd4baa-a872-4f07-b959-752d7d37fd62.PNG)         </span><span class="sxs-lookup"><span data-stu-id="eae41-499">![Where to find the Columns drop down for the TCP Troubleshoot option (on top of the Frame Summary).](media/64fd4baa-a872-4f07-b959-752d7d37fd62.PNG)         </span></span>  
<span data-ttu-id="eae41-p195">Здесь приводится отфильтрованные трассировки в Wireshark. Имеется фильтр, специально для значение MSS ( `tcp.options.mss`). Связанные рамок SYN, SYN/Подтверждения, подтверждения Подтверждений в нижней части Wireshark лежат сведений о кадре (кадров, так что подтверждение 47, ссылки на 46 SYN/Подтверждения, ссылки на 43 SYN) для облегчения такой работы.</span><span class="sxs-lookup"><span data-stu-id="eae41-p195">Here's a filtered trace in Wireshark. There is a filter specific to the MSS value ( `tcp.options.mss`). The frames of a SYN, SYN/ACK, ACK handshake are linked at the bottom of the Wireshark equivalent to Frame Details (so frame 47 ACK, links to 46 SYN/ACK, links to 43 SYN) to make this kind of work easier.</span></span> 

![Трассировка фильтрацией в Wireshark по tcp.options.mss размер сегмента Max (MSS).](media/51e278db-801b-48bc-9b68-87cf92f03fd6.PNG)         
<span data-ttu-id="eae41-504">Если вам нужно проверить Выборочный подтверждения (следующий раздел в данной таблице), не закрывайте трассировки!</span><span class="sxs-lookup"><span data-stu-id="eae41-504">If you need to check Selective Acknowledgment (next topic in this matrix), don't close your trace!</span></span>

### <a name="selective-acknowledgment"></a><span data-ttu-id="eae41-505">Выборочный подтверждения</span><span class="sxs-lookup"><span data-stu-id="eae41-505">Selective Acknowledgment</span></span>

<span data-ttu-id="eae41-p196">Найти в SYN - SYN/приема. должна быть определена как разрешенные в SYN и SYN/приема. Выборочный подтверждения (SACK) обеспечивает облегчению повторной передачи данных, когда пакет или пакеты перейдите отсутствует. Устройства можно отключить эту функцию, которая может стать причиной снижения производительности.</span><span class="sxs-lookup"><span data-stu-id="eae41-p196">Found in the SYN - SYN/ACK. Must be reported as Permitted in both SYN and SYN/ACK. Selective Acknowledgment (SACK) allows for smoother retransmission of data when a packet or packets go missing. Devices can disable this feature, which can lead to performance problems.</span></span> 

<span data-ttu-id="eae41-p197">Если вы находитесь за прокси-сервер или использовании NAT, не забудьте запустить этот тест от клиента к прокси-сервер/выходной/NAT и от прокси-сервер/выходной/NAT в Office 365 для достижения лучших результатов! Далее представлены различные сеансов TCP.</span><span class="sxs-lookup"><span data-stu-id="eae41-p197">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results! These are different TCP sessions.</span></span>

#### <a name="tool"></a><span data-ttu-id="eae41-512">Средство:</span><span class="sxs-lookup"><span data-stu-id="eae41-512">Tool:</span></span> 

<span data-ttu-id="eae41-513">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-513">Netmon</span></span> 

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-514">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-514">What to look for:</span></span>

<span data-ttu-id="eae41-p198">Выборочный подтверждения (SACK) — это еще один параметр в подтверждении SYN-SYN/Подтверждений. Можно отфильтровать трассировки SYN - множество способов SYN/Подтверждений.</span><span class="sxs-lookup"><span data-stu-id="eae41-p198">Selective Acknowledgment (SACK) is another parameter in the SYN-SYN/ACK handshake. You can filter your trace for SYN - SYN/ACK many ways.</span></span> 

<span data-ttu-id="eae41-p199">Найдите подключение в трассировки, который вы хотите видеть либо путем сканирования трассировки, фильтрации, IP-адреса или щелкнув идентификатор беседы с помощью окна беседы сети в сетевой монитор. После открытия пакета SYN, разверните узел TCP в сетевой монитор или Transmission Control Protocol в Wireshark в разделе сведения о кадре. Разверните узел параметры TCP и затем SACK. Найдите связанные frame SYN подтверждение и разверните параметры TCP и его SACK поля. Убедитесь, что может SACK в SYN и SYN/приема. Ниже приведены значения SACK, как видно в Netmon и Wireshark.</span><span class="sxs-lookup"><span data-stu-id="eae41-p199">Locate the connection in the trace that you're interested in seeing either by scanning the trace, filtering by IP addresses, or by clicking a Conversation ID using the Network Conversations window in Netmon. Once you've found the SYN packet, expand TCP in Netmon, or Transmission Control Protocol in Wireshark in the Frame Details section. Expand TCP Options and then SACK. Locate the related SYN-ACK frame and Expand TCP Options and its SACK field. Make certain SACK is permitted in both SYN and SYN/ACK. Here are SACK values as seen in both Netmon and Wireshark.</span></span>

![Выборочный подтверждения (SACK) в Netmon в результате из tcp.flags.syn == 1.](media/216f556f-5031-4ed2-b066-a0d9b3251fa2.PNG)           <br/> ![SACK в Wireshark с фильтром tcp.flags.syn == 1.](media/0a6e26e5-43dc-403b-adc9-3349a55f4e4b.PNG)        

### <a name="dns-geolocation"></a><span data-ttu-id="eae41-525">Географическое положение DNS</span><span class="sxs-lookup"><span data-stu-id="eae41-525">DNS Geolocation</span></span> 

<span data-ttu-id="eae41-526">Где в мире Office 365 пытается разрешить DNS вызова эффекты скорость подключения.</span><span class="sxs-lookup"><span data-stu-id="eae41-526">Where in the world Office 365 tries to resolve your DNS call effects your connection speed.</span></span> 

<span data-ttu-id="eae41-p200">В оперативном режиме Outlook после завершения первого поиска DNS расположение этого DNS будет использоваться для подключения к ближайшему центру обработки данных. Осуществляется подключение к серверу Online Outlook сервера клиентского доступа, которой будет использоваться магистральной сети для подключения к центру обработки данных (dC) места хранения данных. Это быстрее.</span><span class="sxs-lookup"><span data-stu-id="eae41-p200">In Outlook Online, after the first DNS lookup is completed, the location of that DNS will be used to connect to your nearest datacenter. You will be connected to an Outlook Online CAS server, which will use the backbone network to connect to the datacenter (dC) where your data is stored. This is faster.</span></span>

<span data-ttu-id="eae41-530">При доступе к SharePoint Online пользователей, которые отправляются за границей перенаправляются к их активному центру обработки данных —, контроллер домена, расположение которого основано на их SPO клиента домашней base (таким образом, контроллер домена в США Если пользователя, если на основе США).</span><span class="sxs-lookup"><span data-stu-id="eae41-530">When accessing SharePoint Online, a user traveling abroad will be directed to their active datacenter -- that's the dC whose location is based on their SPO tenant's home-base (so, a dC in the USA if the user if USA-based).</span></span>  <br/>  <span data-ttu-id="eae41-p201">Lync online имеет активных узлов в более одного контроллера домена за раз. При, запросы отправляются для Lync online экземпляров Microsoft's DNS будет определить, где в мире запросы, поступающие из и возврата IP-адреса ближайшего региональных контроллера домена которых активен Lync online.</span><span class="sxs-lookup"><span data-stu-id="eae41-p201">Lync online has active nodes in more than one dC at a time. When requests are sent for Lync online instances, Microsoft's DNS will determine where in the world the request came from, and return IP addresses from the nearest regional dC where Lync online is active.</span></span> 

> [!TIP]
> <span data-ttu-id="eae41-p202">Дополнительные сведения о как клиенты могут подключаться к Office 365 Ознакомьтесь со статьей Справочник по [Возможность подключения клиента](https://technet.microsoft.com/en-us/library/dn741250.aspx) (и его полезной графики).</span><span class="sxs-lookup"><span data-stu-id="eae41-p202">Need to know more about how clients connect to Office 365? Take a look at the [Client Connectivity](https://technet.microsoft.com/en-us/library/dn741250.aspx) reference article (and its helpful graphics).</span></span>           
#### <a name="tools"></a><span data-ttu-id="eae41-535">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-535">Tools:</span></span>

- <span data-ttu-id="eae41-536">Ping</span><span class="sxs-lookup"><span data-stu-id="eae41-536">Ping</span></span>
- <span data-ttu-id="eae41-537">PsPing</span><span class="sxs-lookup"><span data-stu-id="eae41-537">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="eae41-538">Что следует искать:</span><span class="sxs-lookup"><span data-stu-id="eae41-538">What to look for:</span></span>

<span data-ttu-id="eae41-p203">В большинстве случаев результат в службе Microsoft DNS возвращает IP-адрес региональный центр обработки данных (dC) следует запросы для разрешения имен из клиента DNS-серверов для DNS-серверов корпорации Майкрософт. Что это означает для вас? Если ваше штаб-квартире находятся в Бангалоре (Индия), но пределов в Соединенных Штатах Америки, когда браузер выполняет запрос для Outlook Online, DNS-серверов корпорации Майкрософт необходимо передать IP-адресов для центров обработки данных в Соединенных Штатах Америки--региональный центр обработки данных. При необходимости почты из Outlook эти данные передаются корпорации Майкрософт быстрого магистральной сети между центрами обработки данных.</span><span class="sxs-lookup"><span data-stu-id="eae41-p203">Requests for name resolution from the client's DNS servers to Microsoft's DNS servers should in most cases result in Microsoft DNS returning the IP address of a regional datacenter (dC). What does this mean for you? If your headquarters are in Bangalore, India, but you are traveling in the United States, when your browser makes a request for Outlook Online, Microsoft's DNS servers should hand you IP addresses to datacenters in the United States -- a regional datacenter. If mail is needed from Outlook, that data will travel across Microsoft's quick backbone network between the datacenters.</span></span>

<span data-ttu-id="eae41-p204">DNS работает быстрее, если разрешение имен выполняется как можно ближе к расположение пользователя по мере возможности. Если вы в Европе, нужно перейти к DNS корпорации Майкрософт в Европе и (в идеальном варианте) смягчения последствий центра обработки данных в Европе. Из клиента в Европе DNS и центра обработки данных в Америке будет работать медленнее.</span><span class="sxs-lookup"><span data-stu-id="eae41-p204">DNS works fastest when name resolution is done as close to the user location as possible. If you're in Europe, you want to go to a Microsoft DNS in Europe, and (ideally) deal with a datacenter in Europe. Performance from a client in Europe going to DNS and a datacenter in America will be slower.</span></span>

<span data-ttu-id="eae41-p205">Запустите средство Ping outlook.office365.com, чтобы определить, где в мире DNS запрос поступает в. Если вы находитесь в Европе, вы должны увидеть ответ от примерно outlook emeawest.office365.com. Америки согласно прогнозу, что-то вроде outlook namnorthwest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="eae41-p205">Run the Ping tool against outlook.office365.com to determine where in the world your DNS request is being routed. If you are in Europe, you should see a reply from something like outlook-emeawest.office365.com. In the Americas, expect something like outlook-namnorthwest.office365.com.</span></span> 

<span data-ttu-id="eae41-p206">Откройте командную строку на клиентском компьютере (через Пуск \> запустите \> cmd или ключ Windows \> введите команду cmd). Введите команду ping outlook.office365.com и нажмите клавишу ВВОД. Помните, что для указания -4, если вы хотите указать для проверки связи через IPv4. Не сможет получить ответ от пакеты ICMP, но должны отображаться имя DNS, к которому было перенаправлено запроса. Если вы хотите просмотреть номера задержку для этого подключения попробуйте PsPing на IP-адрес сервера, на котором возвращается ping.</span><span class="sxs-lookup"><span data-stu-id="eae41-p206">Open the command prompt on the client computer (via Start \> Run \> cmd or Windows key \> type cmd). Type ping outlook.office365.com and press ENTER. Remember, to specify -4 if you want to specify to ping via IPv4. You may fail to get a reply from the ICMP packets, but you should see the name of the DNS to which the request was routed. If you want to see the latency numbers for this connection try PsPing to the IP address of the server that is returned by ping.</span></span>  

![Результаты выполнения команды ping для проверки связи с outlook.office365.com, показывающие разрешение в outlook-namnorthwest.](media/06c944d5-6159-43ec-aa31-757770695e8b.PNG)           
![PSPing на IP-адрес, возвращаемый функцией ping outlook.office365.com отображение средней величины задержки 28 мс.](media/f2b25a75-1a87-4479-b8a7-fa4375683507.PNG)           
### <a name="office-365-application-troubleshooting"></a><span data-ttu-id="eae41-556">Устранение неполадок приложений Office 365</span><span class="sxs-lookup"><span data-stu-id="eae41-556">Office 365 Application Troubleshooting</span></span>

#### <a name="tools"></a><span data-ttu-id="eae41-557">Средства:</span><span class="sxs-lookup"><span data-stu-id="eae41-557">Tools:</span></span> 

- <span data-ttu-id="eae41-558">Сетевой монитор</span><span class="sxs-lookup"><span data-stu-id="eae41-558">Netmon</span></span>
- <span data-ttu-id="eae41-559">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="eae41-559">HTTPWatch</span></span>
- <span data-ttu-id="eae41-560">Консоль F12 в браузере</span><span class="sxs-lookup"><span data-stu-id="eae41-560">F12 Console in the browser</span></span>

<span data-ttu-id="eae41-p207">Мы не охватывают средств, используемых в приложении Устранение неполадок в этой статье относящиеся к сети. Однако вы найдете ресурсы *можно* использовать [на этой странице](https://support.office.com/en-us/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span><span class="sxs-lookup"><span data-stu-id="eae41-p207">We don't cover tools used in application-specific troubleshooting in this network-specific article. But you'll find resources you  *can*  use [on this page](https://support.office.com/en-us/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span></span>
   
## <a name="related-topics"></a><span data-ttu-id="eae41-563">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="eae41-563">Related Topics</span></span>

[<span data-ttu-id="eae41-564">Управление конечных точках Office 365</span><span class="sxs-lookup"><span data-stu-id="eae41-564">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)
  
[<span data-ttu-id="eae41-565">Конечные точки Office 365 вопросы и ответы</span><span class="sxs-lookup"><span data-stu-id="eae41-565">Office 365 endpoints FAQ</span></span>](https://support.office.com/article/d4088321-1c89-4b96-9c99-54c75cae2e6d)
  

