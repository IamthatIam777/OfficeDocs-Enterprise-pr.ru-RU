---
title: Оптимизация настраиваемых расширений на современных страницах сайтов SharePoint Online
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 03/11/2020
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Priority
ms.collection:
- Ent_O365
- Strat_O365_Enterprise
- SPO_Content
f1.keywords:
- CSH
ms.custom: Adm_O365
ms.reviewer: sstewart
search.appverid:
- MET150
description: Узнайте, как оптимизировать производительность настраиваемых расширений на страницах современных сайтов SharePoint Online.
ms.openlocfilehash: bdc05c4e786d07a18c49766bf37aca7f4fde56da
ms.sourcegitcommit: c024b48115cebfdaadfbc724acc2d065394156e9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2020
ms.locfileid: "42603828"
---
# <a name="optimize-custom-extension-performance-in-sharepoint-online-modern-site-pages"></a><span data-ttu-id="2c587-103">Оптимизация производительности настраиваемых расширений страниц современных сайтов SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="2c587-103">Optimize custom extension performance in SharePoint Online modern site pages</span></span>

<span data-ttu-id="2c587-104">Из этой статьи вы узнаете, как определять влияние настраиваемых расширений на задержку, распознаваемую конечным пользователем, и как устранять распространенные проблемы.</span><span class="sxs-lookup"><span data-stu-id="2c587-104">This article will help you understand how to determine how custom extensions affect user perceived latency, and how to remediate common issues.</span></span>

## <a name="use-the-page-diagnostics-for-sharepoint-tool-to-analyze-custom-extensions"></a><span data-ttu-id="2c587-105">Использование средства диагностики страниц SharePoint для анализа настраиваемых расширений</span><span class="sxs-lookup"><span data-stu-id="2c587-105">Use the Page Diagnostics for SharePoint tool to analyze custom extensions</span></span>

<span data-ttu-id="2c587-106">Средство "Диагностика страниц SharePoint" — это браузерное расширение для браузеров Chrome и новой версии Microsoft Edge (https://www.microsoft.com/edge), анализирующее страницы современных и классических сайтов публикаций SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="2c587-106">The Page Diagnostics for SharePoint tool is a browser extension for the new Microsoft Edge (https://www.microsoft.com/edge) and Chrome browsers that analyzes both SharePoint Online modern portal and classic publishing site pages.</span></span> <span data-ttu-id="2c587-107">Это средство предоставляет отчет о каждой проанализированной странице, показывающий, как она работает при заданных критериях производительности.</span><span class="sxs-lookup"><span data-stu-id="2c587-107">The tool provides a report for each analyzed page showing how the page performs against a defined set of performance criteria.</span></span> <span data-ttu-id="2c587-108">Чтобы установить и изучить средство диагностики страниц SharePoint, ознакомьтесь со статьей [Использование средства диагностики страниц SharePoint Online](page-diagnostics-for-spo.md).</span><span class="sxs-lookup"><span data-stu-id="2c587-108">To install and learn about the Page Diagnostics for SharePoint tool, visit [Use the Page Diagnostics tool for SharePoint Online](page-diagnostics-for-spo.md).</span></span>

>[!NOTE]
><span data-ttu-id="2c587-109">Средство диагностики страниц работает только в SharePoint Online, и его нельзя использовать на системной странице SharePoint.</span><span class="sxs-lookup"><span data-stu-id="2c587-109">The Page Diagnostics tool only works for SharePoint Online, and cannot be used on a SharePoint system page.</span></span>

<span data-ttu-id="2c587-110">При анализе страницы сайта SharePoint с помощью средства диагностики страниц SharePoint можно просматривать сведения о настраиваемых расширениях, превышающие базовые показатели, в результатах **Влияние расширений на время загрузки** на панели _Диагностические тесты_.</span><span class="sxs-lookup"><span data-stu-id="2c587-110">When you analyze a SharePoint site page with the Page Diagnostics for SharePoint tool, you can see information about custom extensions that exceed the baseline metric in the **Extensions are impacting load time** result in the _Diagnostic tests_ pane.</span></span>

<span data-ttu-id="2c587-111">Возможные результаты:</span><span class="sxs-lookup"><span data-stu-id="2c587-111">Possible results include:</span></span>

- <span data-ttu-id="2c587-112">**Внимание** (красный цвет) — любое _настраиваемое_ расширение, требующее более **одной** секунды на загрузку.</span><span class="sxs-lookup"><span data-stu-id="2c587-112">**Attention required** (red): Any _custom_ extension that takes longer than **one** second to load.</span></span> <span data-ttu-id="2c587-113">Общее время загрузки распределяется в результатах теста в зависимости от времени, потраченного на загрузку модулей и инициализацию.</span><span class="sxs-lookup"><span data-stu-id="2c587-113">Total load time as displayed in test results is broken down by module load and init.</span></span>
- <span data-ttu-id="2c587-114">**Действия не требуются** (зеленый цвет) — загрузка любого расширения занимает не больше одной секунды.</span><span class="sxs-lookup"><span data-stu-id="2c587-114">**No action required** (green): No extension is taking longer than one second to load.</span></span>

<span data-ttu-id="2c587-115">Если расширение влияет на время загрузки страницы, результаты отображается в разделе результатов **Внимание**.</span><span class="sxs-lookup"><span data-stu-id="2c587-115">If an extension is impacting page load time, the result appears in the **Attention required** section of the results.</span></span> <span data-ttu-id="2c587-116">Щелкните результаты, чтобы просмотреть сведения о том, какое расширение загружается медленно.</span><span class="sxs-lookup"><span data-stu-id="2c587-116">Click the result to see details about which extension is loading slowly.</span></span> <span data-ttu-id="2c587-117">В последующих обновлениях средства диагностики страниц SharePoint могут быть обновленные правила анализа, поэтому убедитесь, что у вас всегда есть последняя версия средства.</span><span class="sxs-lookup"><span data-stu-id="2c587-117">Future updates to the Page Diagnostics for SharePoint tool may include updates to analysis rules, so please ensure you always have the latest version of the tool.</span></span>

![Анализ времени загрузки страницы](media/page-diagnostics-for-spo/pagediag-extensions-load-time.png)

<span data-ttu-id="2c587-119">Результаты содержат следующие данные:</span><span class="sxs-lookup"><span data-stu-id="2c587-119">Information available in the results includes:</span></span>

- <span data-ttu-id="2c587-120">**Имя и идентификатор** — идентификационные данные, необходимые при поиске расширения на странице</span><span class="sxs-lookup"><span data-stu-id="2c587-120">**Name and ID** shows identifying information that can help you find the extension on the page</span></span>
- <span data-ttu-id="2c587-121">**Общее время** — общее время инициализации и загрузки расширения</span><span class="sxs-lookup"><span data-stu-id="2c587-121">**Total** shows the total time for the extension to initialize and load</span></span>
- <span data-ttu-id="2c587-122">**Загрузка модуля** — время, затраченное на извлечение и загрузку расширения</span><span class="sxs-lookup"><span data-stu-id="2c587-122">**Module Load** shows the time taken to fetch and load the extension</span></span>
- <span data-ttu-id="2c587-123">**Инициализация** — время, затраченное на инициализацию расширения</span><span class="sxs-lookup"><span data-stu-id="2c587-123">**Init** shows the time taken for the extension to initialize</span></span>

<span data-ttu-id="2c587-124">Эта информация предназначена для того, чтобы помочь проектировщикам и разработчикам устранять проблемы.</span><span class="sxs-lookup"><span data-stu-id="2c587-124">This information is provided to help designers and developers troubleshoot issues.</span></span> <span data-ttu-id="2c587-125">С ней следует ознакомить команду по проектированию и разработке.</span><span class="sxs-lookup"><span data-stu-id="2c587-125">This information should be provided to your design and development team.</span></span>

## <a name="overview-of-extensions"></a><span data-ttu-id="2c587-126">Обзор расширений</span><span class="sxs-lookup"><span data-stu-id="2c587-126">Overview of extensions</span></span>

<span data-ttu-id="2c587-127">С помощью расширений SharePoint Framework (SPFx) можно сделать SharePoint удобнее для пользователей.</span><span class="sxs-lookup"><span data-stu-id="2c587-127">SharePoint Framework (SPFx) Extensions can be used to extend the SharePoint user experience.</span></span> <span data-ttu-id="2c587-128">Используя расширения SharePoint Framework, можно настроить области уведомлений, панели инструментов, представления данных списков и другие аспекты SharePoint.</span><span class="sxs-lookup"><span data-stu-id="2c587-128">With SharePoint Framework Extensions, you can customize more facets of the SharePoint experience, including notification areas, toolbars, and list data views.</span></span>

<span data-ttu-id="2c587-129">Расширения могут негативно влиять на производительность страницы SharePoint, так как она также использует ресурсы ЦП и сети для выполнения необходимых действий.</span><span class="sxs-lookup"><span data-stu-id="2c587-129">Extensions can have a bad influence on the performance of a SharePoint page as it also takes CPU and network resources to do required work.</span></span>

<span data-ttu-id="2c587-130">Существует четыре типа расширений:</span><span class="sxs-lookup"><span data-stu-id="2c587-130">There are four types of extensions:</span></span>

- <span data-ttu-id="2c587-131">**Настройщики приложений** позволяют добавлять скрипты на страницу и получать доступ к заполнителям известных элементов HTML и дополнять их с использованием специальной отрисовки.</span><span class="sxs-lookup"><span data-stu-id="2c587-131">**Application Customizers** adds scripts to the page, and accesses well-known HTML element placeholders and extends them with custom renderings.</span></span>
- <span data-ttu-id="2c587-132">**Настройщики полей** предоставляют измененные представления данных для полей списка.</span><span class="sxs-lookup"><span data-stu-id="2c587-132">**Field Customizers** provides modified views to data for fields within a list.</span></span>
- <span data-ttu-id="2c587-133">**Наборы команд** позволяют добавлять новые действия для команд SharePoint, а также предоставляют клиентский код, с помощью которого можно реализовать определенное поведение.</span><span class="sxs-lookup"><span data-stu-id="2c587-133">**Command Sets** extend the SharePoint command surfaces to add new actions, and provides client-side code that you can use to implement behaviors.</span></span>
- <span data-ttu-id="2c587-134">**Модификатор поискового запроса (только предварительная версия)** вызывается непосредственно перед выполнением поискового запроса.</span><span class="sxs-lookup"><span data-stu-id="2c587-134">**Search Query Modifier (preview only)** are invoked just before the search query is executed.</span></span>

## <a name="remediate-extension-performance-issues"></a><span data-ttu-id="2c587-135">Устранение проблем производительности расширений</span><span class="sxs-lookup"><span data-stu-id="2c587-135">Remediate extension performance issues</span></span>

<span data-ttu-id="2c587-136">Чтобы определить и устранить проблемы с производительностью расширений, указанных в окне **Влияние расширений на время загрузки страниц**, используйте инструкции, приведенные в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="2c587-136">Follow the guidance in this section to identify and remediate performance issues with extensions listed in the **Extensions are impacting page load time** results.</span></span>

>[!NOTE]
><span data-ttu-id="2c587-137">Настройщики приложений можно выполнять на раннем этапе жизненного цикла страницы, и это может влиять на производительность других расширений на странице.</span><span class="sxs-lookup"><span data-stu-id="2c587-137">Application customizers may be executed in the early stage during the lifecycle of a page and it may influence the performance of other extensions on the page.</span></span>

<span data-ttu-id="2c587-138">Результаты аудита в средстве диагностики страниц содержат два этапа выполнения расширения, чтобы определить потенциальное влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="2c587-138">The audit results in the Page Diagnostic Tool will display two stages of executing an extension in order to help identify the potential performance impact.</span></span>

- <span data-ttu-id="2c587-139">**Загрузка модуля** — это время, необходимое для загрузки расширения, на которое влияет размер расширения. Поэтому рекомендуется объединять в расширении только необходимые библиотеки и выбирать облегченные библиотеки.</span><span class="sxs-lookup"><span data-stu-id="2c587-139">**Module load** is how long it takes to load the extension, which is impacted by the size of an extension so it is a good idea to only bundle the necessary libraries in the extension and to also choose lighter libraries.</span></span>
- <span data-ttu-id="2c587-140">**Инициализация** — это время инициализации расширения. Разработчики расширений должны учитывать, выполняет ли расширение ненужные действия или слишком много команд на этапе инициализации.</span><span class="sxs-lookup"><span data-stu-id="2c587-140">**Init** is the initialization time of the extension and extension developers should consider whether the extension is doing unnecessary work or executing too many commands during the initializing stage.</span></span>

<span data-ttu-id="2c587-141">Авторы страниц также могут использовать результаты аудита, чтобы определить, содержит ли страница слишком много расширений, так как слишком большое количество расширений будет негативно влиять на производительность страницы.</span><span class="sxs-lookup"><span data-stu-id="2c587-141">Page authors can also use the audit result to see whether a page has too many extensions as too many extensions will negatively impact the performance of a page.</span></span>

- <span data-ttu-id="2c587-142">**Размер расширения и зависимости**</span><span class="sxs-lookup"><span data-stu-id="2c587-142">**Extension size and dependencies**</span></span>
  - <span data-ttu-id="2c587-143">Для оптимальной статической загрузки ресурсов следует использовать сеть доставки содержимого (CDN) Office 365.</span><span class="sxs-lookup"><span data-stu-id="2c587-143">Use of the Office 365 CDN is required for optimal static resource download.</span></span> <span data-ttu-id="2c587-144">Открытые источники CDN предпочтительнее использовать для файлов _JS и CSS_.</span><span class="sxs-lookup"><span data-stu-id="2c587-144">Public CDN origins are preferable for _js/css_ files.</span></span> <span data-ttu-id="2c587-145">Дополнительные сведения о сети Office 365 CDN см. в статье [Использование сети доставки содержимого Office 365 с SharePoint Online](use-office-365-cdn-with-spo.md).</span><span class="sxs-lookup"><span data-stu-id="2c587-145">For more information about using the Office 365 CDN, see [Use the Office 365 Content Delivery Network (CDN) with SharePoint Online](use-office-365-cdn-with-spo.md).</span></span>
  - <span data-ttu-id="2c587-146">Повторно используйте такие платформы, как _React_ и _Fabric imports_, которые входят в состав SharePoint Framework (SPFx).</span><span class="sxs-lookup"><span data-stu-id="2c587-146">Reuse frameworks like _React_ and _Fabric imports_ that come as part of the SharePoint Framework (SPFx).</span></span> <span data-ttu-id="2c587-147">Дополнительные сведения см. в статье [Обзор SharePoint Framework](https://docs.microsoft.com/sharepoint/dev/spfx/sharepoint-framework-overview).</span><span class="sxs-lookup"><span data-stu-id="2c587-147">For more information, see [Overview of the SharePoint Framework](https://docs.microsoft.com/sharepoint/dev/spfx/sharepoint-framework-overview).</span></span>
  - <span data-ttu-id="2c587-148">Убедитесь, что у вас установлена последняя версия SharePoint Framework, и обновляйте до новых версий, когда они станут доступны.</span><span class="sxs-lookup"><span data-stu-id="2c587-148">Ensure that you are using the latest version of the SharePoint Framework, and upgrade to new versions as they become available.</span></span>
- <span data-ttu-id="2c587-149">**Извлечение или кэширование данных**</span><span class="sxs-lookup"><span data-stu-id="2c587-149">**Data fetching/caching**</span></span>
  - <span data-ttu-id="2c587-150">Если расширение использует дополнительные вызовы сервера, чтобы извлечь данные для отображения, убедитесь, что эти серверные API достаточно быстры и (или) выполняют кэширование на стороне клиента (например, с использованием _localStorage_ или _IndexDB_ для более крупных наборов).</span><span class="sxs-lookup"><span data-stu-id="2c587-150">If the extension relies on extra server calls to fetch data for display, ensure those server APIs are fast and/or implement client side caching (such as using _localStorage_ or _IndexDB_ for larger sets).</span></span>
  - <span data-ttu-id="2c587-151">Если для отображения важных данных требуется несколько вызовов, воспользуйтесь пакетной обработкой на сервере или другими методами объединения запросов в один вызов.</span><span class="sxs-lookup"><span data-stu-id="2c587-151">If multiple calls are required to render critical data, consider batching on the server or other methods of consolidating requests to a single call.</span></span>
  - <span data-ttu-id="2c587-152">Если определенные данные задействуют медленные серверные API, а отображение может начаться и без них, рекомендуется отделить их в независимый вызов, который будет выполнен после отображения критически важных данных.</span><span class="sxs-lookup"><span data-stu-id="2c587-152">Alternatively, if some elements of data require a slower API, but are not critical to initial rendering, decouple these to a separate call that is executed after critical data is rendered.</span></span>
  - <span data-ttu-id="2c587-153">Когда одни и те же данные повторяются в разных частях, используйте один уровень данных, чтобы избежать повторения вызовов.</span><span class="sxs-lookup"><span data-stu-id="2c587-153">If multiple parts use the same data, utilize a common data layer to avoid duplicate calls.</span></span>
- <span data-ttu-id="2c587-154">**Время отображения**</span><span class="sxs-lookup"><span data-stu-id="2c587-154">**Rendering time**</span></span>
  - <span data-ttu-id="2c587-155">Любые мультимедийные источники, такие как изображения и видеоролики, следует уменьшать до размера контейнера, устройства и (или) сети во избежание загрузки ненужных больших активов.</span><span class="sxs-lookup"><span data-stu-id="2c587-155">Any media sources like images and videos should be sized to the limits of the container, device and/or network to avoid downloading unnecessary large assets.</span></span> <span data-ttu-id="2c587-156">Дополнительные сведения о пакетных зависимостях см. в статье [Использование сети доставки содержимого Office 365 с SharePoint Online](use-office-365-cdn-with-spo.md).</span><span class="sxs-lookup"><span data-stu-id="2c587-156">For more information about content dependencies, see [Use the Office 365 Content Delivery Network (CDN) with SharePoint Online](use-office-365-cdn-with-spo.md).</span></span>
  - <span data-ttu-id="2c587-157">Избегайте вызовов API, которые приводят к перегруппировке, применению сложных правил CSS или сложной анимации.</span><span class="sxs-lookup"><span data-stu-id="2c587-157">Avoid API calls that cause re-flow, complex CSS rules or complicated animations.</span></span> <span data-ttu-id="2c587-158">Дополнительные сведения см. в статье [Минимизация перегруппировки браузера](https://developers.google.com/speed/docs/insights/browser-reflow).</span><span class="sxs-lookup"><span data-stu-id="2c587-158">For more information, see [Minimizing browser reflow](https://developers.google.com/speed/docs/insights/browser-reflow).</span></span>
  - <span data-ttu-id="2c587-159">Избегайте выполнения длительных цепных задач.</span><span class="sxs-lookup"><span data-stu-id="2c587-159">Avoid use of chained long running tasks.</span></span> <span data-ttu-id="2c587-160">Разбивайте такие задачи на отдельные очереди.</span><span class="sxs-lookup"><span data-stu-id="2c587-160">Instead, break long running tasks apart into separate queues.</span></span> <span data-ttu-id="2c587-161">Дополнительные сведения см. в статье [Оптимизация выполнения JavaScript](https://developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution).</span><span class="sxs-lookup"><span data-stu-id="2c587-161">For more information, see [Optimize JavaScript Execution](https://developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution).</span></span>
  - <span data-ttu-id="2c587-162">Резервируйте соответствующее место для асинхронного отображения визуальных элементов или элементов мультимедиа, чтобы избежать пропуска кадров и перебоев, известных как_подвисания_.</span><span class="sxs-lookup"><span data-stu-id="2c587-162">Reserve corresponding space for asynchronously rendering media or visual elements to avoid skipped frames and stuttering (also known as _jank_).</span></span>
  - <span data-ttu-id="2c587-163">Если какой-либо из браузеров не поддерживает функцию, используемую для отображения, загрузите полизаполнение или исключите выполнение зависимого кода.</span><span class="sxs-lookup"><span data-stu-id="2c587-163">If a certain browser doesn't support a feature used in rendering, either load a polyfill or exclude running dependent code.</span></span> <span data-ttu-id="2c587-164">А если эта функция не является критической, удалите ресурсы, например, обработчики событий, чтобы избежать утечки памяти.</span><span class="sxs-lookup"><span data-stu-id="2c587-164">If the feature is not critical, dispose resources such as event handlers to avoid memory leaks.</span></span>

<span data-ttu-id="2c587-165">Перед изменением в страниц для устранения проблем производительности запомните время загрузки страницы по результатам анализа.</span><span class="sxs-lookup"><span data-stu-id="2c587-165">Before you make page revisions to remediate performance issues, make a note of the page load time in the analysis results.</span></span> <span data-ttu-id="2c587-166">Снова запустите средство после внесения изменений, чтобы узнать, соответствует ли новый результат базовому стандарту, и проверить, сократилось ли время загрузки.</span><span class="sxs-lookup"><span data-stu-id="2c587-166">Run the tool again after your revision to see if the new result is within the baseline standard, and check the new page load time to see if there was an improvement.</span></span>

![Анализ времени загрузки страницы](media/modern-portal-optimization/pagediag-page-load-time.png)

>[!NOTE]
><span data-ttu-id="2c587-168">Время загрузки страницы зависит от множества факторов, например от загрузки сети, времени суток и других переменных условий.</span><span class="sxs-lookup"><span data-stu-id="2c587-168">Page load time can vary based on a variety of factors such as network load, time of day, and other transient conditions.</span></span> <span data-ttu-id="2c587-169">Следует несколько раз проверить время загрузки страницы до и после внесения изменений, чтобы получить среднестатистические данные.</span><span class="sxs-lookup"><span data-stu-id="2c587-169">You should test page load time a few times before and after making changes to help you average the results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2c587-170">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="2c587-170">Related topics</span></span>

[<span data-ttu-id="2c587-171">Настройка производительности SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="2c587-171">Tune SharePoint Online performance</span></span>](tune-sharepoint-online-performance.md)

[<span data-ttu-id="2c587-172">Настройка производительности Office 365</span><span class="sxs-lookup"><span data-stu-id="2c587-172">Tune Office 365 performance</span></span>](tune-office-365-performance.md)

[<span data-ttu-id="2c587-173">Производительность в современном интерфейсе SharePoint</span><span class="sxs-lookup"><span data-stu-id="2c587-173">Performance in the modern SharePoint experience</span></span>](https://docs.microsoft.com/sharepoint/modern-experience-performance)

[<span data-ttu-id="2c587-174">Сети доставки содержимого</span><span class="sxs-lookup"><span data-stu-id="2c587-174">Content delivery networks</span></span>](content-delivery-networks.md)

[<span data-ttu-id="2c587-175">Использование сети доставки содержимого Office 365 с SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="2c587-175">Use the Office 365 Content Delivery Network (CDN) with SharePoint Online</span></span>](use-office-365-cdn-with-spo.md)