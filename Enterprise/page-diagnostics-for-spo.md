---
title: Использование средства диагностики страниц для SharePoint Online
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection: Ent_O365
search.appverid:
- MET150
- SPO160
- MOE150
- BSA160
ms.assetid: dbab2593-dc6a-40f7-adfe-031b9baa620f
description: Используйте средство диагностики страниц для SharePoint, чтобы проанализировать классические страницы с учетом рекомендуемых рекомендаций для SharePoint Online.
ms.openlocfilehash: f61d680ab4470429436cd0bb88925c2f1fc63323
ms.sourcegitcommit: 6b4c3a11ef7000480463d43a7a4bc2ced063efce
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "35616802"
---
# <a name="use-the-page-diagnostics-tool-for-sharepoint-online"></a>Использование средства диагностики страниц для SharePoint Online

В этой статье описывается, как можно использовать средство диагностики страниц для анализа классических страниц и страниц публикации на классических сайтах группы на соответствие подмножеству рекомендаций в **SharePoint Online**. 
  
Сайты групп, для которых не включена публикация, не могут использовать сети CDN, но все остальные правила могут быть применены. При публикации добавляются дополнительные затраты, поэтому не следует включать публикацию только для того, чтобы получить доступ к функциям CDN, так как она будет отрицательно влиять на время загрузки страницы.

**Обратите внимание, что выпущена версия 1.05, поэтому обновите добавочный номер, если он уже установлен**. Если вы не знаете, какая версия у вас, щелкните ссылку "о программе", чтобы проверить ее.
  
> [!IMPORTANT]
> Средство диагностики страниц не будет работать с библиотеками документов или системными страницами, так как средство предназначено для просмотра страниц сайта SharePoint. Страница *AllItems. aspx* — это системная страница. При попытке запустить средство на системной странице вы получите сообщение "это приложение должно выполняться только на страницах SharePoint". <br/> ![Должно выполняться на странице SharePoint](media/34aadfff-1009-496b-9c87-4fc2780e017c.png)<br/>Это не ошибка в средстве, так как для оценки библиотек или системных страниц отсутствует значение. Перейдите на несистемную страницу SharePoint, чтобы использовать средство. Если это происходит на странице SharePoint, проверьте MasterPage, так как мы видели, что клиенты удалили SharePoint Метатагс, а затем эта страница больше не является страницей SharePoint. Вы хотите оставить отзыв о средстве, перейдите на вкладку о программе и перейдите по [ссылке Отправить отзыв](https://go.microsoft.com/fwlink/?linkid=874109). 
  
## <a name="install-the-page-diagnostic-tool"></a>Установка средства диагностики страниц

> [!IMPORTANT]
> Корпорация Майкрософт не читает данные или веб-сайты, которые вы посещаете, и не собираете никаких личных сведений, веб-сайта или сведений о загрузке с помощью этого средства. Единственными сведениями, регистрируемыми средством, являются имя клиента, количество правил и возможность использования средства ведения журнала поддержки при запуске средства. Эта информация предназначена для анализа проблем, с которыми сталкиваются наши клиенты, и обеспечения возможности ведения журнала поддержки.

1. С помощью браузера Chrome напрямую откройте [ссылку на средство](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi) или откройте Поиск в [веб хранилище браузера Chrome](https://chrome.google.com/webstore/search/page%20diagnostics%20for%20sharepoint) и установите расширение браузера. Ознакомьтесь с политикой конфиденциальности пользователя, указанной на странице Описание в магазине. При добавлении средства в браузер вы увидите следующее уведомление о разрешениях.<br/>![Разрешения для хранилища Chrome](media/e9fbcef0-1171-43ac-8ea8-c2b5be1b7925.png)<br/>   Это уведомление размещается, так как страница может содержать контент из расположений вне SharePoint в зависимости от веб-частей и настроек на странице. Это означает, что средство будет считывать запросы и ответы при нажатии кнопки "Пуск" и только на активной вкладке SharePoint, где запущено средство. Эти сведения записываются веб-браузером локально и доступны вам с помощью ссылки экспорт в JSON средства. **Сведения не отправляются или не фиксируются корпорацией Майкрософт.** (Средство учитывает политику конфиденциальности Майкрософт, доступную [здесь](https://go.microsoft.com/fwlink/p/?linkid=857875).)<br/><br/>Функции "экспорт в JSON" в средстве также требуют разрешения "Управление загрузкой". Прежде чем приступить к совместному использованию JSON-файла в Организации, следуйте собственным рекомендациям по обеспечению конфиденциальности, так как результаты содержат URL-адреса и могут классифицироваться как персональные данные (личные данные).
    
2. (Необязательно) Если вы хотите использовать средство в режиме Chrome инкогнито, перейдите к расширению и щелкните **Разрешить в инкогнито**.
    
3. Перейдите на классический узел публикации SharePoint в SharePoint Online, который вы хотите просмотреть. Мы разрешили загрузку элементов на страницах с задержкой. Таким образом, **средство не будет автоматически остановлено**. Если вы хотите остановить сбор, нажмите кнопку **остановить**. (Это разрабатывается для всех сценариев загрузки страниц.) Прежде чем нажать кнопку **остановить**, убедитесь в том, что данные трассировки сети завершены. В противном случае у вас будет частичная трассировка. Кроме того, средство является расширением браузера, и открытие нескольких вкладок или окон позволит запускать только один активный экземпляр средства одновременно. Это ограничение расширений в браузере. 
  
4. Щелкните значок добавочного номера ![Средство диагностики страниц для логотипа SharePoint](media/60a3e44d-1b59-483f-b50f-d580044d921a.png) чтобы загрузить средство и вы увидите следующее всплывающее окно расширения:<br/> ![Всплывающее окно средства диагностики страниц](media/b01fa00e-c5f3-4c37-91f2-6edd096cf87e.png)<br/>Операции запуска и остановки соответствуют базовой концепции при нажатии кнопки запустить страницу будет перезагружена, и начнется сбор коллекции.

Ознакомьтесь со следующими разделами, чтобы узнать больше о сведениях, предоставленных в средстве.

## <a name="what-youll-see-in-the-page-diagnostics-tool"></a>Сведения, которые вы увидите в средстве диагностики страниц
    
1. Ссылка " **о программе** " предоставит общие сведения о средстве, в том числе ссылку на эту статью. Кроме того, он содержит прямую ссылку на рекомендации по повышению производительности SharePoint, уведомление третьих лиц и возможность предоставления отзыва о средстве. 
    
2. **Идентификатор корреляции, SPRequestDuration, спиислатенци**, **время загрузки страницы**и сведения об **URL-адресе** являются информационными и могут использоваться в нескольких целях. 
    
  - **CorrelationId** является важным элементом при работе с командами поддержки Майкрософт, так как он позволяет им извлекать дополнительные диагностические данные. 
    
  - **SPRequestDuration** это время сервера, затраченное на обработку страницы. Если это время слишком длинное, это не обязательно означает, что сервер выполнял неправильное, но также может отражать количество вызовов и загрузку, отправленных страницей на сервер, например структурную навигацию, крупные изображения, множество вызовов API, которые могут работать дольше, чем на сервере. . 
    
  - **Спиислатенци** — это время (в миллисекундах), затраченное на интерфейсный веб-сервер при получении запроса на загрузку страницы. Это индикатор задержки для запуска обработки страницы и не включает время, затрачиваемое на отклик веб-приложения. 
    
  - **Время загрузки страницы** — это время, записанное страницей с момента запроса до момента получения и просмотра ответа браузером. На любое дополнительное время влияют производительность компьютера и время, необходимое для загрузки браузера. 
    
  - **URL-адрес** (Uniform Resource Locator) — это веб-адрес текущей страницы. 
    
3. На [вкладке **Диагностика** ](#how-to-use-the-diagnostic-tab) выводятся правила, а если какие-либо из них помечены ![красным](media/9859ac84-be43-4eae-984c-e0e827f5a228.png)крестиком, на странице обнаружены проблемы.<br/>Каждое правило имеет собственную ссылку "Дополнительные сведения", которую вы щелкните, если элемент красного цвета. Откроется информация, относящаяся к этому правилу, и способ устранения проблемы.<br/>![Диагностика Red — правило открыто](media/1598f0f7-3103-4613-8787-dfec6fffd40a.png)

4. На [вкладке **Трассировка сети** ](#how-to-use-the-network-trace-tab) представлены сведения о запросах и ответах на построение страниц.

## <a name="how-to-use-the-diagnostic-tab"></a>Использование вкладки диагностики

1. **Проверка выполнения от имени обычного пользователя**  Для проверки производительности страницы не следует выполнять вход в качестве учетной записи службы, администратора или администратора семейства веб-сайтов или любой учетной записи с повышенными привилегиями. Дополнительные скрипты и функции загружаются специально для этих типов учетных записей, поэтому результаты не будут иметь представление о том, что производительность страницы является истинной.
    
2. **Проверка запросов к SharePoint**  Количество данных и запросов, выполняемых на сервере, должно быть ограничено, так как перегруженная страница будет испытывать низкую производительность. Эта проверка проверяет количество запросов, выполняемых в SharePoint, и выдает рекомендации, когда запросы превышают 6 запросов. Большинство запросов должны кэшироваться и, следовательно, не вызываться для каждой нагрузки страницы. Кэш должен быть настроен и использоваться по крайней мере в течение 15 минут, чтобы уменьшить количество вызовов на страницу каждым и каждым пользователем. Это распространенная проблема, и в большинстве случаев данные изменяются ежедневно, но страница проверяет и извлекает данные каждый раз для каждого пользователя, который часто не нужен.
    
3. **Проверка использования сети CDN**  Сети доставки контента (сети CDN) были предоставлены корпорацией Майкрософт, а упомянутые ниже, — это сети доставки содержимого SharePoint Online. Существует несколько типов, а также различные службы CDN, такие как SharePoint сети CDN, а затем сети CDN в Azure. [Воспользуйтесь приведенными ниже рекомендациями](https://go.microsoft.com/fwlink/?linkid=873250).
    
4. **Проверка крупных размеров изображений**  Изображения следует оптимизировать для веб-сайта, используя улучшенные веб-типы, например PNG. Представления изображений также следует использовать и доступны непосредственно в SharePoint. Изображения/представления изображений, размер которых превышает 100kb, будут выделены как неоптимизированные для веб-сайта. [Для оптимизации изображений используйте следующие рекомендации](https://go.microsoft.com/fwlink/?linkid=873251).
    
5. **Проверка структуры навигации**  Структурная навигация изначально разработана для использования в локальной среде SharePoint, где можно использовать кэш объектов. Структурная навигация не рекомендуется для использования в SharePoint Online и должна быть заменена управляемой навигацией или настраиваемым поставщиком. [Для оптимизации навигации используйте следующие рекомендации.](https://go.microsoft.com/fwlink/?linkid=873247)
    
6. **Проверка веб-части КБК** (КБК — веб-часть "контент по запросу")  Веб-часть "контент по запросу" создает высокую нагрузку SQL, так как она проходит все элементы в запросе для каждой нагрузки на каждую страницу, для каждого пользователя. В отличие от локальной установки, отсутствует доступный кэш для ограничения числа запросов, необходимых для заполнения этой веб-части. Так как такой КБК работает медленно и влияет на общую производительность страницы, поэтому его не следует использовать. Используйте веб-часть "поиск контента" (CSWP) в качестве замены для веб-части "Запрос контента". [Используйте следующие рекомендации, связанные с веб-частью "поиск контента"](https://go.microsoft.com/fwlink/?linkid=873245).

## <a name="how-to-use-the-network-trace-tab"></a>Использование вкладки "Трассировка сети"
    
На вкладке **Трассировка сети** содержатся подробные сведения о запросах на создание страницы, а также о полученных ответах. 

1. **Найдите время загрузки элементов, помеченное красным цветом**. Производительность каждого запроса и ответа зависит от их влияния на общую производительность страницы следующим образом:
- Зеленый: \< 500ms
- Желтый: 500 — 1000ms
- Красный: \> 1000ms
<br/>![Трассировка сети](media/3cfede99-7d31-4041-888d-7bbc275cadc2.png)<br/> На изображенном выше изображении красный элемент относится к странице по умолчанию. Он всегда отображается красным цветом, если страница не загружается в \< 1000ms (не менее 1 секунды).

2. **Время загрузки тестового элемента**. В некоторых случаях нет времени или индикатора цвета, так как элементы уже были кэшированы браузером. Чтобы правильно проверить это, откройте страницу, очистите кэш браузера, а затем нажмите кнопку **запустить** , чтобы выполнить загрузку страницы "холодно" и иметь истинное отражение начальной загрузки страницы. В этом случае необходимо сравнить загрузку страницы "теплый", так как она также поможет определить, какие элементы кэшируются на странице. 
    
3. **Поделитесь соответствующими сведениями с другими пользователями, которые могут помочь в исследовании проблем**. Чтобы поделиться сведениями или сведениями, предоставленными в инструменте, с разработчиками или специалистами службы технической поддержки, нажмите **экспортировать в JSON** (как показано на рисунке выше). Это позволит скачать результаты, отображаемые с помощью средства просмотра файлов JSON.

> [!IMPORTANT]
> Эти результаты содержат URL-адреса и могут классифицироваться как персональные данные (персональные данные). Перед распространением этих сведений обязательно следуйте указаниям Организации. 

## <a name="engaging-with-microsoft-support"></a>Эффект от поддержки корпорации Майкрософт
   
Мы включили **функцию уровня поддержки Майкрософт** , которую следует использовать только при работе непосредственно в случае поддержки для повышения производительности. Использование этой функции не дает никаких преимуществ при отсутствии поддержки нашей группы поддержки. На самом деле страница будет выполняться значительно медленнее, и продолжение использования функции может быть "неправильным". При использовании этой функции в средстве нет дополнительной информации о том, что дополнительные сведения добавляются в журнал службы. 

Изменения не отображаются, Кроме того, вы будете уведомлены о том, что вы включили его, и производительность страницы будет значительно снижена за счет 2-3 медленнее, чем включено. Она будет релевантна только для конкретной страницы и активного сеанса. По этой причине этот параметр следует использовать только в том случае, если он активно вовлечен в нашу службу поддержки.

### <a name="to-enable-the-microsoft-support-level-feature"></a>Включение функции уровня поддержки Майкрософт

1. Откройте средство диагностики страниц.
2. На клавиатуре нажмите клавиши ALT + SHIFT + L. Будет отображено **ведение журнала на уровне поддержки**. 
3. Установите флажок, а затем нажмите кнопку **Пуск** , чтобы перегрузить страницу и создать подробное ведение журнала для поддержки анализа.<br/>![Включен параметр поддержки](media/ddef47de-8593-4b28-9346-eb48ebf6cdab.png)
  
Важный элемент — это элемент CorrelationID, который Группа поддержки будет использовать этот номер для извлечения необходимой информации. Скопируйте CorrelationID (в начале средства диагностики страницы) и обеспечьте поддержку, так как не удается выполнить требуемую работу без полного идентификатора.
    
## <a name="related-topics"></a>Статьи по теме

[Настройка производительности SharePoint Online](tune-sharepoint-online-performance.md)

[Настройка производительности Office 365](tune-office-365-performance.md)

[Сети доставки содержимого](content-delivery-networks.md)
