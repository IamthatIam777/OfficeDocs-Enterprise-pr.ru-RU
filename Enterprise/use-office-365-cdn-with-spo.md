---
title: Использование сети доставки содержимого Office 365 с помощью SharePoint Online
ms.author: krowley
author: kccross
manager: laurawi
ms.date: 6/29/2018
ms.audience: ITPro
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection: Ent_O365
ms.custom: Adm_O365
search.appverid:
- MET150
- SPO160
ms.assetid: bebb285f-1d54-4f79-90a5-94985afc6af8
description: Инструкции по использованию Office 365 встроенных сети доставки содержимого (CDN) для ускорения доставки SharePoint Online активов для всех пользователей, независимо от того, где они находятся и как они доступ к содержимому.
ms.openlocfilehash: fd118e8df404961e1c35c6297a788397f810d1a2
ms.sourcegitcommit: bbbe304bb1878b04e719103be4287703fb3ef292
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2019
ms.locfileid: "29547117"
---
# <a name="use-the-office-365-content-delivery-network-with-sharepoint-online"></a>Использование сети доставки содержимого Office 365 с помощью SharePoint Online

Вы можете размещать статического активами в Office 365 сети доставки содержимого (CDN) для повышения быстродействия для SharePoint Online страниц. Статические активы, файлов, не очень часто изменяющихся как изображения, видео и звука, таблицы стилей, шрифты и файлов JavaScript. CDN работает как географически распределенные кэширования прокси-сервер, путем кэширования статических активы ближе к браузеры и их разрешения на запрос. 
  
Если вы уже знакомы с то, как работа CDN, необходимо выполнить некоторые действия, чтобы настроить ее. В этом разделе описывается, как. Ознакомьтесь с сведениями о Office 365 CDN, а также для начала размещения статического активов.
  
 **HEAD обратно [Планирование сети и настройка производительности для Office 365](https://aka.ms/tune).**
  
## <a name="office-365-cdn-basics"></a>Основные сведения о CDN Office 365

Office 365 CDN включены в SharePoint Online подписки. Требуется дополнительная оплата для него не нужно. Office 365 обеспечивает поддержку обоих частный и общий доступ и позволяет для размещения статического активами в несколько расположений или происхождения. Office 365 CDN не совпадает с Azure CDN. Для получения дополнительных сведений о почему следует использовать в сети доставки Содержимого или общие понятия CDN, в статье [сети доставки содержимого](content-delivery-networks.md).
  
## <a name="how-the-cdn-grants-access-to-end-users"></a>Способ CDN предоставления доступа конечным пользователям

Закрытый статический активами в Office 365 CDN доступа к с маркеры, создаваемая программой SharePoint Online. Пользователей, имеющих разрешения на доступ к папке или библиотеке, обозначенного происхождения будет автоматически предоставлен маркеры. SharePoint Online не поддерживает разрешения на уровне элементов для CDN.
  
Например, в файле, расположенном в `https://contoso.sharepoint.com/sites/site1/library1/folder1/image1.jpg`, учитывая следующие:
  
- Пользователь 1 имеет доступ к folder1 и image1.jpg
    
- Пользователь 2 не имеет доступа к folder1
    
- Не имеет доступа к folder1 пользователя 3, но предоставлены явные разрешения на доступ к image1.jpg через SharePoint Online
    
- Пользователь 4 имеет доступ к folder1, но явно запрещен доступ к image1.jpg
    
Затем выполняются следующие:
  
- Пользователь 1 и 4 пользователя смогут получить доступ к image1.jpg через CDN.
    
- Пользователь 2 и 3 пользователя нельзя будет для доступа к image1.jpg через CDN.
    
    Тем не менее 3 пользователя по-прежнему доступны image1.jpg активов непосредственно через SharePoint Online во время 4 пользователя не может получить доступ к активов через SharePoint Online.
    
## <a name="overview-of-working-with-the-office-365-cdn"></a>Общие сведения о работе с Office 365 CDN

Чтобы настроить Office 365 CDN, выполните следующие основные действия:
  
- Планирование развертывания сети CDN:
    
  - Определите, какие статического активы будут размещены на Office 365 CDN. Подробные сведения о том, как сделать эти варианты выбора обратитесь к [сети доставки содержимого](content-delivery-networks.md).
    
  - [Определите, где будут храниться активов](use-office-365-cdn-with-spo.md#CDNStoreAssets). Это расположение папки или в библиотеке SharePoint и вызывается источник.
    
  - Определите, сделанных общедоступный или конфиденциальную активов. Выполните этот формат, если вы [Выберите, следует ли каждого origin public или private](use-office-365-cdn-with-spo.md#CDNOriginChoosePublicPrivate). Если вы хотите, у вас есть несколько источники, в которых ниже указаны некоторые общедоступные и ниже указаны некоторые закрытый.
    
- [Задать и настройке Office 365 CDN с помощью консоли SharePoint Online](use-office-365-cdn-with-spo.md#CDNSetupinPShell). После завершения этого шага будет иметь:
    
  - Включить CDN для вашей организации.
    
  - Добавлен вашей происхождения. Определение каждого origin как public или private.
    
После завершения установки, [Управление Office 365 CDN](use-office-365-cdn-with-spo.md#CDNManage) со временем с: 
  
- Добавление, обновление и удаление ресурсов
    
- Добавление и удаление происхождения
    
- Настройка политик CDN
    
- В случае необходимости отключение Office 365 CDN
    
## <a name="determine-where-you-want-to-store-your-assets"></a>Определите место хранения активов

CDN извлекает активов из вызывать источник расположения. Для Office 365 источник — это библиотека SharePoint или папку, доступную с URL-адреса. При указании происхождения для вашей организации, существует множество способов. К примеру можно указать несколько происхождения или единого происхождения место для размещения всех CDN средств. Вы можете иметь public или private происхождения для вашей организации. Большинство организаций будет выбирать для реализации комбинации двух.
  
При указании нескольких сотен происхождения, скорее всего будет отрицательное влияние на время, необходимое для обработки запросов. Мы рекомендуем, что при наличии более около 100 происхождения может потребоваться пересмотреть свою архитектуру.
  
## <a name="choose-whether-each-origin-should-be-public-or-private"></a>Выберите, следует ли каждого origin public или private

При указании источник указывается ли оно должно быть выполнено public или private. Независимо от того, какой вариант выбран Microsoft выполняет сложных задач с администрирования CDN самого. Кроме того решение можно изменить позднее, после настройки CDN и определяемую вашей происхождения.
  
Общие и частные параметры повысить производительность, но каждая имеет уникальный атрибуты и их преимущества.
  
 **Атрибуты и размещение активов в общей origin преимущества**
  
- Доступные для всех средств, представленных в общедоступных origin доступных анонимным.
    
    > [!IMPORTANT]
    > Если в вашей сети CDN определяет общедоступных происхождения, никогда не следует помещать ресурсы, которые считаются зависит от вашей организации в общедоступных происхождения или библиотеке SharePoint Online. 
  
- При удалении основного средства из открытого origin актива может и дальше будут доступны до 30-дневная из кэша; Тем не менее станут недействительными ссылки на средства в CDN в течение 15 минут.
    
- При узел таблицы стилей (CSS-файлы) в общедоступных происхождения, можно использовать относительные пути и URI в коде. Это означает, что можно ссылаться на местоположение фоновые изображения и другие объекты относительно местоположения активов, который делает вызов.
    
- Серьезный можно в коде общедоступных исходный URL-адрес, но это не рекомендуется. Причина этого —, что если доступ к сети CDN, станут недоступны, URL-адрес не будет автоматически разрешить для вашей организации в SharePoint Online и может привести к ссылок и других ошибках.
    
- Типы файлов по умолчанию, которые включены для общедоступных происхождения, .css, .eot, GIF, .ico, JPEG, .jpg, с расширением js, .map, .png, .svg, .ttf и .woff. Можно указать дополнительные типы файлов.
    
- Если вы хотите, можно настроить политику, чтобы исключить активы, определенных с сайта классификации строк, которые можно указать. Например можно исключить все ресурсы, которые помечены как «confidential» или «ограниченный», даже если разрешенного типа и находятся в общедоступных origin.
    
 **Атрибуты и их преимущества размещения активами в частной происхождения**
  
- Пользователи могли осуществлять доступ активов с частной происхождения, если они имеют право делать это. Анонимный доступ к этим средствам запрещено.
    
- При удалении актива с частной происхождения актива может и дальше стал доступен до часа из кэша; Тем не менее станут недействительными ссылки на средства в CDN в течение 15 минут.
    
- Типы файлов по умолчанию, которые включены для частных происхождения, GIF, .ico, JPEG, .jpg, с расширением js и .png. Можно указать дополнительные типы файлов.
    
- Так же, как общедоступный происхождения вы можете настроить политику для исключения основных средств, которые определены классификаций сайта, которые задают даже в том случае, если использовать подстановочные знаки для включения всех средств в папке или библиотеке сайта.
    
## <a name="default-office-365-cdn-origins"></a>По умолчанию происхождения Office 365 CDN

Если не указано иное, Office 365 создает некоторые источники по умолчанию автоматически при включении Office 365 CDN. Если изначально исключить их, можно добавить эти источники после завершения установки.
  
По умолчанию закрытый происхождение:
  
- \*/userphoto.aspx
    
- \*/siteassets
    
Происхождение общедоступный по умолчанию:
  
- \*/MasterPage
    
- \*Style library

> [!NOTE]
> Clientsideassets является origin общедоступный по умолчанию, который был добавлен в дек 2017 таким образом, чтобы при наличии общих CDN до этого времени не увидеть запись автоматически добавляется, но если вы создали позже, вы увидите это изменение автоматически. Если нужно выполнить чтение пример использования этого origin CDN, см.: [узел со стороны клиента веб-части из сети CDN Office 365 (часть 4 Hello World)](https://docs.microsoft.com/en-us/sharepoint/dev/spfx/web-parts/get-started/hosting-webpart-from-office-365-cdn)
    
## <a name="set-up-and-configure-the-office-365-cdn-by-using-the-sharepoint-online-management-shell"></a>Установка и настройка Office 365 CDN с помощью консоли SharePoint Online

Процедуры, описанные в этом разделе необходимо использовать командную консоль SharePoint Online для подключения к SharePoint Online. Сведения содержатся в разделе [подключение к SharePoint Online PowerShell](https://docs.microsoft.com/powershell/sharepoint/sharepoint-online/connect-sharepoint-online?view=sharepoint-ps).
  
Выполните следующие действия, чтобы установить и настроить CDN Office 365 для размещения статического активов в SharePoint Online.
  
### <a name="to-enable-your-organization-to-use-the-office-365-cdn"></a>Чтобы включить организации к использованию Office 365 CDN

Командлет **Set-SPOTenantCdnEnabled** используется для включения организации к использованию Office 365 CDN. Можно включить организации к использованию общедоступных происхождения, закрытый происхождения или с CDN. Можно также настроить CDN Office 365 прекращение установки по умолчанию происхождения, если вы включили. Всегда можно добавить эти происхождения более поздней версии, как описано в этом разделе. 
  
В Windows Powershell для SharePoint Online:
  
```
Set-SPOTenantCdnEnabled -CdnType <Public | Private | Both> -Enable $true
```

Например чтобы включить организации использовать общие и частные происхождения с CDN, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Both -Enable $true
```

Чтобы включить вашей организации использовать общие и частные происхождения с CDN, но пропустить настройку источники по умолчанию, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Both -Enable $true -NoDefaultOrigins
```

Чтобы включить организации к использованию общедоступных происхождения с CDN, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Public -Enable $true
```

Чтобы включить организации к использованию закрытый происхождения с CDN, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Private -Enable $true
```

Дополнительные сведения о этот командлет [Set-SPOTenantCdnEnabled](https://technet.microsoft.com/en-us/library/mt790765.aspx)см.
  
### <a name="optional-to-change-the-list-of-file-types-to-include-in-the-office-365-cdn"></a>(Необязательно) Для изменения списка типов файлов, включаемых в Office 365 CDN
<a name="Office365CDNforSPOFileType"> </a>

> [!TIP]
> При определении типов файлов с помощью командлета **Set-SPOTenantCdnPolicy** , перезаписать в настоящее время определенный список. Если вы хотите добавить дополнительные типы файлов в список, чтобы узнать, какие типы файлов уже разрешенных и включить их в список, а также новых структур сначала используйте командлет. 
  
Командлет **Set-SPOTenantCdnPolicy** для определения статические типы файлов, которые могут размещаться общие и частные источники в сети CDN. По умолчанию общие типы активов разрешены для примера .css, GIF, .jpg и расширением js. 
  
В Windows PowerShell для SharePoint Online:
  
```
Set-SPOTenantCdnPolicy -CdnType <Public | Private> -PolicyType IncludeFileExtensions -PolicyValue "<Comma-separated list of file types >"
```

Чтобы узнать, какие типы файлов в данный момент разрешено с CDN, выполните командлет **Get-SPOTenantCdnPolicies** : 
  
```
Get-SPOTenantCdnPolicies -CdnType <Public | Private>
```

Дополнительные сведения об этих командлетах можно [Set SPOTenantCdnPolicy](https://technet.microsoft.com/en-us/library/mt800839.aspx) и [Get-SPOTenantCdnPolicies](https://technet.microsoft.com/en-us/library/mt800838.aspx).
  
### <a name="optional-to-change-the-list-of-site-classifications-you-want-to-exclude-from-the-office-365-cdn"></a>(Необязательно) Чтобы изменить список сайтов классификации строк, которые необходимо исключить из сети CDN Office 365
<a name="Office365CDNforSPOSiteClassification"> </a>

> [!TIP]
> Когда исключение классификаций сайта с помощью командлета **Set-SPOTenantCdnPolicy** перезаписать в настоящее время определенный список. Если требуется исключить классификаций дополнительных сайта, командлет сначала узнать, какие классификации уже могут быть исключены, а затем добавить их вместе с новых структур. 
  
Командлет **Set-SPOTenantCdnPolicy** исключать классификаций сайта, которые не требуется сделать доступным через CDN. По умолчанию без классификации сайтов, могут быть исключены. 
  
В Windows PowerShell для SharePoint Online:
  
```
Set-SPOTenantCdnPolicy -CdnType <Public | Private> -PolicyType ExcludeRestrictedSiteClassifications  -PolicyValue "<Comma-separated list of site classifications >"
```

Чтобы узнать, какие классификации сайта в настоящее время ограничены, выполните командлет **Get-SPOTenantCdnPolicies** : 
  
```
Get-SPOTenantCdnPolicies -CdnType <Public | Private>
```

Дополнительные сведения об этих командлетах можно [Set SPOTenantCdnPolicy](https://technet.microsoft.com/en-us/library/mt800839.aspx) и [Get-SPOTenantCdnPolicies](https://technet.microsoft.com/en-us/library/mt800838.aspx).
  
### <a name="to-add-an-origin-for-your-assets"></a>Чтобы добавить источник средств
<a name="Office365CDNforSPOOrigin"> </a>

Используйте командлет **Add-SPOTenantCdnOrigin** для определения источник. Вы можете определить нескольких источников. Источником является URL-адрес, указывающий на библиотеку SharePoint или папки, содержащей ресурсы, которые будут размещаться CDN. 
  
> [!IMPORTANT]
> Если в вашей сети CDN определяет общедоступных происхождения, никогда не следует помещать ресурсы, которые считаются зависит от вашей организации в общедоступных происхождения или библиотеку SharePoint Online. 
  
```
Add-SPOTenantCdnOrigin -CdnType <Public | Private> -OriginUrl <path >
```

Где путь — это путь к папке, содержащей активов. Можно использовать подстановочные знаки в дополнение к относительные пути. Например чтобы включить всех средств в папке макетом для всех сайтов как общедоступный происхождения в рамках CDN, введите следующую команду:
  
```
Add-SPOTenantCdnOrigin -CdnType Public -OriginUrl */masterpage
```

Дополнительные сведения об этой команды и синтаксис можно [Добавить SPOTenantCdnOrigin](https://technet.microsoft.com/en-us/library/mt790772.aspx).
  
После выполнения команды, система выполняет синхронизацию конфигурации через Центр обработки данных. Это занимает 15 минут.
  
### <a name="example-configure-a-public-origin-for-your-master-pages-and-for-your-style-library-for-sharepoint-online"></a>Пример: Настройка общедоступных происхождения для главных страниц и библиотеки стилей для SharePoint Online
<a name="ExamplePublicOrigin"> </a>

Как правило эти источники настраиваются автоматически по умолчанию при включении общедоступных происхождения для Office 365 CDN. Тем не менее если вы хотите включить их вручную, выполните следующие действия.
  
- Используйте командлет **Add-SPOTenantCdnOrigin** определение библиотеку стилей в качестве открытого происхождения в рамках Office 365 CDN. 
    
  ```
  Add-SPOTenantCdnOrigin -CdnType Public -OriginUrl */style%20library
  ```

- Используйте командлет **Add-SPOTenantCdnOrigin** определение главных страниц в качестве открытого происхождения в рамках Office 365 CDN. 
    
  ```
  Add-SPOTenantCdnOrigin -CdnType Public -OriginUrl */masterpage
  ```

- Дополнительные сведения об этой команды и синтаксис можно [Добавить SPOTenantCdnOrigin](https://technet.microsoft.com/en-us/library/mt790772.aspx).
    
    После выполнения команды, система выполняет синхронизацию конфигурации через Центр обработки данных. Это занимает 15 минут.
    
### <a name="example-configure-a-private-origin-for-your-site-assets-site-pages-and-publishing-images-for-sharepoint-online"></a>Пример: Настройка закрытый происхождения для средств сайтов, страниц сайта и публикации изображений для SharePoint Online
<a name="ExamplePrivateOrigin"> </a>

- Используйте командлет **Add-SPOTenantCdnOrigin** определение папку ресурсов сайта в качестве закрытого происхождения в рамках Office 365 CDN. 
    
  ```
  Add-SPOTenantCdnOrigin -CdnType Private -OriginUrl */siteassets
  ```

- Используйте командлет **Add-SPOTenantCdnOrigin** определение на папку страницы сайта в качестве закрытого происхождения в рамках Office 365 CDN. 
    
  ```
  Add-SPOTenantCdnOrigin -CdnType Private -OriginUrl */sitepages
  ```

- Используйте командлет **Add-SPOTenantCdnOrigin** Определение папки публикации изображений в качестве закрытого происхождения в рамках Office 365 CDN. 
    
  ```
  Add-SPOTenantCdnOrigin -CdnType Private -OriginUrl */publishingimages
  ```

    Дополнительные сведения об этой команды и синтаксис можно [Добавить SPOTenantCdnOrigin](https://technet.microsoft.com/en-us/library/mt790772.aspx).
    
    После выполнения команды, система выполняет синхронизацию конфигурации через Центр обработки данных. Это занимает 15 минут.
    
### <a name="example-configure-a-private-origin-for-a-site-collection-for-sharepoint-online"></a>Пример: Настройка закрытый происхождения для семейства веб-сайтов для SharePoint Online
<a name="ExamplePrivateOriginSiteCollection"> </a>

Используйте командлет **Add-SPOTenantCdnOrigin** определение семейства веб-сайтов в качестве закрытого происхождения в рамках Office 365 CDN. Например 
  
```
Add-SPOTenantCdnOrigin -CdnType Private -OriginUrl sites/site1/siteassets
```

Дополнительные сведения об этой команды и синтаксис можно [Добавить SPOTenantCdnOrigin](https://technet.microsoft.com/en-us/library/mt790772.aspx).
  
После выполнения команды, система выполняет синхронизацию конфигурации через Центр обработки данных. Это занимает 15 минут.
  
## <a name="manage-the-office-365-cdn"></a>Управление Office 365 CDN
<a name="CDNManage"> </a>

После настройки CDN можно вносить изменения в конфигурацию, как обновлять содержимое или при изменении потребностей как описано в этом разделе.
  
### <a name="to-add-update-or-remove-assets-from-the-office-365-cdn"></a>Добавление, обновление и удаление ресурсов из сети CDN Office 365
<a name="Office365CDNforSPOaddremoveasset"> </a>

После выполнения программы установки действия, можно добавить новые ресурсы и обновить или удалить существующие ресурсы в любой момент. Только что внесите изменения к средствам в папку или библиотеку SharePoint, которая определена как источник. При добавлении нового средства, он доступен через CDN немедленно. Тем не менее при обновлении активов, необходимое для новой копии для распространения и становятся доступными в CDN до 15 минут.
  
Если вам потребуется получить расположение источника, можно использовать командлет **Get-SPOTenantCdnOrigins** . Сведения о том, как с помощью этого командлета [Get-SPOTenantCdnOrigins](https://technet.microsoft.com/en-us/library/mt790770.aspx)см.
  
### <a name="to-remove-an-origin-from-the-office-365-cdn"></a>Чтобы удалить источник из сети CDN Office 365
<a name="Office365CDNforSPORemoveOrigin"> </a>

Если требуется, можно удалить доступ к папке или библиотеку SharePoint, которая определена как источник. Чтобы сделать это, используйте командлет **Remove-SPOTenantCdnOrigin** . Сведения о том, как с помощью этого командлета [Remove-SPOTenantCdnOrigin](https://technet.microsoft.com/en-us/library/mt790761.aspx)см.
  
### <a name="to-modify-an-origin-in-the-office-365-cdn"></a>Чтобы изменить источник в Office 365 CDN
<a name="Office365CDNforSPORemoveOrigin"> </a>

Невозможно изменить источник, созданные пользователем. Вместо этого удалить источник, а затем добавьте новый. Для получения дополнительных сведений см. [Чтобы удалить источник из сети CDN Office 365](use-office-365-cdn-with-spo.md#Office365CDNforSPORemoveOrigin) и [Добавление origin средств](use-office-365-cdn-with-spo.md#Office365CDNforSPOOrigin).
  
### <a name="to-disable-the-office-365-cdn"></a>Чтобы отключить Office 365 CDN
<a name="Office365CDNforSPODisable"> </a>

Командлет **Set-SPOTenantCdnEnabled** используется для отключения CDN для вашей организации. При наличии обоих общие и частные источники включена поддержка CDN, необходимо запустить командлет два раза как показано в следующих примерах. 
  
Чтобы отключить использование общих источники в сети CDN, в Windows Powershell для SharePoint Online, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Public -Enable $false
```

Чтобы отключить использование закрытого источники в сети CDN, введите следующую команду:
  
```
Set-SPOTenantCdnEnabled -CdnType Private -Enable $false
```

Дополнительные сведения о этот командлет [Set-SPOTenantCdnEnabled](https://technet.microsoft.com/en-us/library/mt790765.aspx)см.
  
## <a name="troubleshooting-your-office-365-cdn-configuration"></a>Устранение неполадок в Office 365 CDN конфигурации
<a name="CDNManage"> </a>

Конечной точки нельзя сразу же доступны для использования, сколько потребуется время регистрации для распространения через CDN. Конфигурация занимает 15 минут.
  

