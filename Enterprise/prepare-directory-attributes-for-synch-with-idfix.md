---
title: Подготовка атрибутов каталога для синхронизации с Office 365 с помощью инструмента IdFix
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
ms.assetid: 497593cf-24c6-491c-940b-7c86dcde9de0
description: Инструкции по использованию IdFix для подготовки и очистить локальный каталог до синхронизации с Office 365.
ms.openlocfilehash: a4fc8af476ec8ffdd7d762796abe1ec210a1bacb
ms.sourcegitcommit: 69d60723e611f3c973a6d6779722aa9da77f647f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2018
ms.locfileid: "22542560"
---
# <a name="prepare-directory-attributes-for-synchronization-with-office-365-by-using-the-idfix-tool"></a>Подготовка атрибутов каталога для синхронизации с Office 365 с помощью инструмента IdFix
В этом разделе приводятся подробные инструкции о запуске инструмента IdFix некоторые распространенные ошибки, которые могут возникнуть, предлагаемые исправления, примеры и практические советы по что делать, если у вас есть большое количество ошибок.
  
## <a name="fixing-errors-in-your-directory-by-using-the-idfix-gui"></a>Устранение ошибок в каталоге с помощью графического интерфейса пользователя IdFix
[Запуск инструмента Office 365 IdFix](install-and-run-idfix.md) для поиска проблем в каталоге и затем исправить ошибки в графическом Интерфейсе, как описано в этом разделе. Если средство возвращает пустой таблицы, обнаруженные без ошибок. Если существует множество проблем в каталоге, может быть затруднительным при средство возвращает ошибки. Один способ решения это необходимо сначала исправить все ошибки одного типа и затем перейти к следующей типа. 
  
1. Прежде чем вносить изменения ознакомьтесь с рекомендациями, представленными IdFix.
    
2. Просмотрите список ошибок, которые вернул IdFix. Вы можете отсортировать ошибки по типу, щелкнув **ERROR** вверху столбца с типами ошибок. Если с атрибутом связано более одной ошибки, ошибки будут объединены в одну строку. При наличии возможности IdFix предоставляет рекомендации по их исправлению в столбце **UPDATE**. Это исправление основано на проверке других атрибутов, связанных с объектом. Хотя они обычно лучше атрибутов, указанных в каталоге, только вы можете решить какой из них действительно точный. 
    
3. Если IdFix предложение для исправления ошибок дублирование, исправление определенный с помощью одного из трех флаги в начале значение в столбце **UPDATE** , например `[E]john.doe@contoso.com`. Если вы принимаете предложения, когда применить изменения флаг не вставляется в каталоге. Только следующие предложения, флаг будет применяться, например, значение `john.doe@contoso.com`. Если вы хотите принять предложение, выберите соответствующий действие в столбце **Действие** . Флаги указывают действия, как показано ниже: 
    
 - **[C]**: предлагаемое действие — **COMPLETE**. Это значение не нуждается в редактировании.
    
 - **[E]**: предлагаемое действие — **EDIT**. Это значение следует изменить во избежание конфликтов с другим значением в каталоге.
    
 - **[R]**: предлагаемое действие — **REMOVE**. Это значение прокси-сервера SMTP на не включенный в почтовый ящик объект и может быть безопасно удалено.
    
4. Один раз прочесть и понять ошибки, обновить запись в столбце **обновление** внесенными изменениями, и в **Действие** столбца выберите необходимые IdFix для реализации изменения. Например, два пользователи могут иметь `proxyAddress` помечаются как повторяющихся. Можно использовать только один пользователь `proxyAddress` для доставки электронной почты. Чтобы устранить эту неполадку, пометить как пользователь с правильное значение в столбце **Действие** **ЗАВЕРШЕНО** и пометить как в столбце **Действие** **удаления** для других пользователей. Это действие удаляет `proxyAddress` атрибут от пользователя, которому это `proxyAddress` не принадлежит, так и без изменений пользователю, для которого это `proxyAddress` является правильным.
    
## <a name="common-errors-and-fixes-detected-by-idfix"></a>Распространенные ошибки, обнаруживаемые IdFix, и способы их исправления
В следующей таблице описаны ошибки, определяемые IdFix, приведены предлагаемые инструментом наиболее распространенные способы их решения, а в некоторых случаях — примеры их исправления.

|**ОШИБКА**|**Описание типа ошибки**|**Предлагаемое решение**|**Пример**|
|:-----|:-----|:-----|:-----|
|**character** | Недопустимые знаки. Значение содержит символ, который является недопустимым. | Предлагаемое решение этой ошибки, отображаемой в столбце **UPDATE**, представлено в виде значения, из которого удален недопустимый символ.  <br/> | Пробел в конце правильный почтовый адрес является недопустимый символ, например:  <br/> " `user@contoso.com` "  <br/> Начальный пробел в начале допустимого почтовый адрес является недопустимый символ, например:  <br/> " ` user@contoso.com `"  <br/>  `ú` Символ — недопустимый символ. |
|**duplicate** | Повторяющаяся запись. Данное значение повторяется в рамках запроса. Все повторяющиеся значения будут отображены как ошибки. | Измените или удалите значения, чтобы избежать повторений. Данный инструмент не предоставляет исправлений для повторяющихся значений. Вместо этого вы можете выбрать запись, для которой повторяющееся значение является правильным, а остальные записи удалить. ||
|**format** | Ошибка форматирования. Данное значение нарушает требования к формату использования атрибута. | В качестве предлагаемого обновленного значения будет отображено значение с удаленными недопустимыми знаками. Если недопустимых символов нет, то значения в столбцах Update и Value будут совпадать. Необходимо определить, что вам требуется в обновлении. Данный инструмент не предоставляет исправлений для всех ошибок форматирования. | Например SMTP-адреса должны соответствовать RFC 2822 и mailNickName не может начинаться или заканчиваться точкой. Дополнительные сведения о требованиях к формат для атрибутов каталога см раздел «Каталог подготовки объектов и атрибутов» [Prepare to provision пользователей с помощью синхронизации службы каталогов в Office 365](prepare-for-directory-synchronization.md). |
|topleveldomain  <br/> |Доменов верхнего уровня. Это относится к значениям может быть [RFC 2822](https://go.microsoft.com/fwlink/p/?LinkId=401464) форматирования. Если имя домена верхнего уровня не internet маршрутизируемые это будет идентифицировано как ошибка. Например SMTP-адреса, заканчивающиеся .local не маршрутизируемые Интернет и может вызвать эту ошибку. |Измените значение на маршрутизируемый в Интернете домен, таких как `.com` или `.net`. | Изменение `myaddress@fourthcoffee.local` для `fourthcoffee.com` или другой маршрутизируемый в Интернете домен.  <br/> Сведения содержатся в разделе [Подготовка без поддержки маршрутизации домена (например, .local домена) для синхронизации службы каталогов](prepare-a-non-routable-domain-for-directory-synchronization.md). |
|**domainpart** | Ошибка в доменной части. Эта ошибка применяется к значениям, подлежащим форматированию в соответствии с RFC 2822. Она отображается, если часть имени домена указана неправильно или не соответствует RFC 2822. | Измените значение на один, соответствующего стандарту RFC 2822. К примеру убедитесь в том, что она не содержит пробелов и недопустимых символов. | Изменение `myaddress@fourth coffee.com` для `myaddress@fourthcoffee.com`. |
|**domainpart_localpart** | Ошибка в локальной части домена. Эта ошибка применяется к значениям, подлежащим форматированию в соответствии с RFC 2822. Она отображается, если локальная часть указана неправильно или не соответствует RFC 2822. |Измените значение на один, соответствующего стандарту RFC 2822. К примеру убедитесь в том, что она не содержит пробелов и недопустимых символов. |Изменение `my"work"address@fourthcoffee.com` для `myworkaddress@fourthcoffee.com`. |
|**length** | Ошибка длины. Это значение нарушает ограничение по длине для данного атрибута. Эта ошибка чаще всего возникает при изменении схемы каталога.  | Обновление, предлагаемое IdFix, усечет имеющееся значение до допустимой длины.  <br/> Имейте в виду, что это может привести к нежелательным результатам. Перед тем как нажать кнопку **Apply** (Применить) просмотрите предлагаемое исправление и измените его, если это необходимо. ||
|**blank**  | Ошибка: пустое или нулевое множество. Это значение нарушает ограничение на ненулевое множество для синхронизируемых атрибутов. Только несколько атрибутов должны содержать значение. | Если это возможно, предложенное обновленное значение будет использовать значения других атрибутов для получения похожей подставляемой величины. ||
|**mailmatch** | Это относится к Office 365 выделенных только. Значение не соответствует атрибут mail. | Предлагаемые обновленным значением будет значение почтового атрибута с префиксом «SMTP:». ||
    
## <a name="operations-you-can-perform-by-using-idfix"></a>Операции, доступные в IdFix
Чтобы исправить ошибку, выберите параметр из раскрывающегося списка **ACTION** . В следующей таблице описаны операции **Действие** , которые можно выполнить на атрибутов с помощью инструмента IdFix. Если в столбце **Действие** оставить пустым, инструмента IdFix не вступят каких-либо действий на этой ошибки в каталоге. 

|**ДЕЙСТВИЕ**|**Описание**|**Пример**|
|:-----|:-----|:-----|
|**COMPLETE** | Исходное значение является приемлемым и не должно быть изменено несмотря на то, что оно идентифицировано как ошибка. | У двух пользователей имеется значение proxyAddress, идентифицированное как повторяющееся. Один из них может использовать это значение для доставки электронной почты. Отметьте пользователя с правильным значением как **COMPLETE**. |
|**УДАЛЕНИЕ** | Значение атрибута будет удалено из объекта источника. В случае это многозначный атрибут, например `proxyAddresses`, будут удалены только отдельные указано значение. | У двух пользователей имеется значение proxyAddress, идентифицированное как повторяющееся. Один из них может использовать это значение для доставки электронной почты. Отметьте пользователя с повторяющимся значением как **REMOVE**. |
|**ИЗМЕНЕНИЕ** | Сведения, приведенные в столбце **UPDATE** будет использоваться для изменения значения атрибута. Если предлагаемое допустимое значение **обновления** с IdFix затем в столбце **Действие** выберите команду **Изменить** и перейти к следующей ошибке. Если вам не нравится предложения, введите новое в столбце **UPDATE** , а затем в столбце **Действие** выберите **Изменить**. ||
|**ОТМЕНИТЬ** | Этот параметр доступен только в том случае, если пользователь восстановлен из журнала транзакций. Если выбрать **UNDO**, будет восстановлено исходное значение атрибута. ||
|**FAIL** | Это значение возвращается только в том случае, если **UPDATE** значения имеет неизвестный конфликтов с правилами Доменные службы Active Directory. В этом случае значение в столбце **UPDATE** можно изменить снова Если вы знаете возможности сбоя. Может потребоваться анализ значений в объекте, используя Редактирование ADSI. Для получения дополнительных сведений см [ADSI Edit (adsiedit.msc)](https://go.microsoft.com/fwlink/p/?LinkId=401170). ||

После выбора действия **ACTION** для ошибки или ряда ошибок, нажмите кнопку **Применить**. При нажатии кнопки **Apply** (Применить) средство внесет изменения в каталог. Вы можете предоставить исправления для нескольких ошибок, а потом нажать кнопку **Apply**, чтобы IdFix изменил их все за один раз.

Запуск IdFix еще раз, чтобы убедиться, что исправления, внесенные вами не вызовет новых ошибок. Можно повторить эти действия столько раз, сколько требуется. Рекомендуется пройти через процесс несколько раз, перед выполнением синхронизации.
    
## <a name="changing-the-rule-set-used-by-idfix"></a>Изменение набора правил, используемого IdFix
По умолчанию IdFix использует правила несколькими клиентами, задайте для тестирования операций в каталоге. Это вправо набора правил для большинства Office 365 = клиентов. Тем не менее при наличии в Office 365 выделенных или соответствующих международным правилам ТОРГОВЛИ (International трафик в руки нормы) клиента, можно настроить IdFix для использования выделенного вместо этого набора правил. Если вы не уверены, какой тип клиента, вы являетесь, этот шаг можно пропустить безопасно. Чтобы задать правила, задайте значение выделенными, щелкните значок шестеренки в строке меню и нажмите кнопку **выделенными**.
  
## <a name="changing-the-scope-of-the-search-used-by-idfix"></a>Изменение области поиска, используемого IdFix
По умолчанию IdFix ищет по всему каталогу. Если необходимо, вместо этого можно настроить инструмент для поиска в определенном поддереве. Для этого в строке меню нажмите значок фильтра и выберите нужное поддерево.
  
## <a name="rolling-back-your-changes-by-using-the-idfix-gui"></a>Откат изменений с помощью графического интерфейса пользователя IdFix
Каждый раз, нажмите кнопку **Применить** , чтобы применить изменения, инструмента IdFix создает отдельный файл с именем, которое содержит список изменений только что созданную журнала транзакций. Можно использовать журнал транзакций откат только те изменения, которые находятся в журнале самыми последними в случае, если в случае ошибки. Если при обновлении допущена ошибка, можно отменить недавно примененные изменения, нажав кнопку **Отмена**. При нажатии кнопки **Отмена**IdFix использует журнал транзакций для откат только что эти изменения, которые находятся в последнюю журнала транзакций. Дополнительные сведения об использовании журнала транзакций можно [ссылку: журнал транзакций Office 365 IdFix](idfix-transaction-log.md).